module.exports=[50661,(e,t,r)=>{var i,n;i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.exports=n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 0xff00ff&n.rotl(e,8)|0xff00ff00&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,i=0;r<e.length;r++,i+=8)t[i>>>5]|=e[r]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var n=e[r]<<16|e[r+1]<<8|e[r+2],u=0;u<4;u++)8*r+6*u<=8*e.length?t.push(i.charAt(n>>>6*(3-u)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var t=[],r=0,n=0;r<e.length;n=++r%4)0!=n&&t.push((i.indexOf(e.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|i.indexOf(e.charAt(r))>>>6-2*n);return t}}},49442,(e,t,r)=>{var i={utf8:{stringToBytes:function(e){return i.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(i.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};t.exports=i},28994,(e,t,r)=>{function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){var t;return null!=e&&(i(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))||!!e._isBuffer)}},55391,(e,t,r)=>{var i,n,u,s,a;i=e.r(50661),n=e.r(49442).utf8,u=e.r(28994),s=e.r(49442).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):n.stringToBytes(e):u(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=i.bytesToWords(e),o=8*e.length,c=0x67452301,l=-0x10325477,d=-0x67452302,p=0x10325476,f=0;f<r.length;f++)r[f]=(r[f]<<8|r[f]>>>24)&0xff00ff|(r[f]<<24|r[f]>>>8)&0xff00ff00;r[o>>>5]|=128<<o%32,r[(o+64>>>9<<4)+14]=o;for(var g=a._ff,_=a._gg,v=a._hh,h=a._ii,f=0;f<r.length;f+=16){var k=c,b=l,x=d,S=p;c=g(c,l,d,p,r[f+0],7,-0x28955b88),p=g(p,c,l,d,r[f+1],12,-0x173848aa),d=g(d,p,c,l,r[f+2],17,0x242070db),l=g(l,d,p,c,r[f+3],22,-0x3e423112),c=g(c,l,d,p,r[f+4],7,-0xa83f051),p=g(p,c,l,d,r[f+5],12,0x4787c62a),d=g(d,p,c,l,r[f+6],17,-0x57cfb9ed),l=g(l,d,p,c,r[f+7],22,-0x2b96aff),c=g(c,l,d,p,r[f+8],7,0x698098d8),p=g(p,c,l,d,r[f+9],12,-0x74bb0851),d=g(d,p,c,l,r[f+10],17,-42063),l=g(l,d,p,c,r[f+11],22,-0x76a32842),c=g(c,l,d,p,r[f+12],7,0x6b901122),p=g(p,c,l,d,r[f+13],12,-0x2678e6d),d=g(d,p,c,l,r[f+14],17,-0x5986bc72),l=g(l,d,p,c,r[f+15],22,0x49b40821),c=_(c,l,d,p,r[f+1],5,-0x9e1da9e),p=_(p,c,l,d,r[f+6],9,-0x3fbf4cc0),d=_(d,p,c,l,r[f+11],14,0x265e5a51),l=_(l,d,p,c,r[f+0],20,-0x16493856),c=_(c,l,d,p,r[f+5],5,-0x29d0efa3),p=_(p,c,l,d,r[f+10],9,0x2441453),d=_(d,p,c,l,r[f+15],14,-0x275e197f),l=_(l,d,p,c,r[f+4],20,-0x182c0438),c=_(c,l,d,p,r[f+9],5,0x21e1cde6),p=_(p,c,l,d,r[f+14],9,-0x3cc8f82a),d=_(d,p,c,l,r[f+3],14,-0xb2af279),l=_(l,d,p,c,r[f+8],20,0x455a14ed),c=_(c,l,d,p,r[f+13],5,-0x561c16fb),p=_(p,c,l,d,r[f+2],9,-0x3105c08),d=_(d,p,c,l,r[f+7],14,0x676f02d9),l=_(l,d,p,c,r[f+12],20,-0x72d5b376),c=v(c,l,d,p,r[f+5],4,-378558),p=v(p,c,l,d,r[f+8],11,-0x788e097f),d=v(d,p,c,l,r[f+11],16,0x6d9d6122),l=v(l,d,p,c,r[f+14],23,-0x21ac7f4),c=v(c,l,d,p,r[f+1],4,-0x5b4115bc),p=v(p,c,l,d,r[f+4],11,0x4bdecfa9),d=v(d,p,c,l,r[f+7],16,-0x944b4a0),l=v(l,d,p,c,r[f+10],23,-0x41404390),c=v(c,l,d,p,r[f+13],4,0x289b7ec6),p=v(p,c,l,d,r[f+0],11,-0x155ed806),d=v(d,p,c,l,r[f+3],16,-0x2b10cf7b),l=v(l,d,p,c,r[f+6],23,0x4881d05),c=v(c,l,d,p,r[f+9],4,-0x262b2fc7),p=v(p,c,l,d,r[f+12],11,-0x1924661b),d=v(d,p,c,l,r[f+15],16,0x1fa27cf8),l=v(l,d,p,c,r[f+2],23,-0x3b53a99b),c=h(c,l,d,p,r[f+0],6,-0xbd6ddbc),p=h(p,c,l,d,r[f+7],10,0x432aff97),d=h(d,p,c,l,r[f+14],15,-0x546bdc59),l=h(l,d,p,c,r[f+5],21,-0x36c5fc7),c=h(c,l,d,p,r[f+12],6,0x655b59c3),p=h(p,c,l,d,r[f+3],10,-0x70f3336e),d=h(d,p,c,l,r[f+10],15,-1051523),l=h(l,d,p,c,r[f+1],21,-0x7a7ba22f),c=h(c,l,d,p,r[f+8],6,0x6fa87e4f),p=h(p,c,l,d,r[f+15],10,-0x1d31920),d=h(d,p,c,l,r[f+6],15,-0x5cfebcec),l=h(l,d,p,c,r[f+13],21,0x4e0811a1),c=h(c,l,d,p,r[f+4],6,-0x8ac817e),p=h(p,c,l,d,r[f+11],10,-0x42c50dcb),d=h(d,p,c,l,r[f+2],15,0x2ad7d2bb),l=h(l,d,p,c,r[f+9],21,-0x14792c6f),c=c+k>>>0,l=l+b>>>0,d=d+x>>>0,p=p+S>>>0}return i.endian([c,l,d,p])})._ff=function(e,t,r,i,n,u,s){var a=e+(t&r|~t&i)+(n>>>0)+s;return(a<<u|a>>>32-u)+t},a._gg=function(e,t,r,i,n,u,s){var a=e+(t&i|r&~i)+(n>>>0)+s;return(a<<u|a>>>32-u)+t},a._hh=function(e,t,r,i,n,u,s){var a=e+(t^r^i)+(n>>>0)+s;return(a<<u|a>>>32-u)+t},a._ii=function(e,t,r,i,n,u,s){var a=e+(r^(t|~i))+(n>>>0)+s;return(a<<u|a>>>32-u)+t},a._blocksize=16,a._digestsize=16,t.exports=function(e,t){if(null==e)throw Error("Illegal argument "+e);var r=i.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):i.bytesToHex(r)}},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},6461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},44651,(e,t,r)=>{var i=e.r(54799);let n=e.r(6461);class u{constructor(e){this.__type=e,this.__privileges={}}__pack_type(){let e=new f;return e.putUint16(this.__type),e.pack()}__pack_privileges(){let e=new f;return e.putTreeMapUInt32(this.__privileges),e.pack()}service_type(){return this.__type}add_privilege(e,t){this.__privileges[e]=t}pack(){return Buffer.concat([this.__pack_type(),this.__pack_privileges()])}unpack(e){let t=new g(e);return this.__privileges=t.getTreeMapUInt32(),t}}class s extends u{constructor(e,t){super(1),this.__channel_name=e,this.__uid=0===t?"":`${t}`}pack(){let e=new f;return e.putString(this.__channel_name).putString(this.__uid),Buffer.concat([super.pack(),e.pack()])}unpack(e){let t=super.unpack(e);return this.__channel_name=t.getString(),this.__uid=t.getString(),t}}s.kPrivilegeJoinChannel=1,s.kPrivilegePublishAudioStream=2,s.kPrivilegePublishVideoStream=3,s.kPrivilegePublishDataStream=4;class a extends u{constructor(e){super(2),this.__user_id=e||""}pack(){let e=new f;return e.putString(this.__user_id),Buffer.concat([super.pack(),e.pack()])}unpack(e){let t=super.unpack(e);return this.__user_id=t.getString(),t}}a.kPrivilegeLogin=1;class o extends u{constructor(){super(4)}pack(){return super.pack()}unpack(e){return super.unpack(e)}}o.kPrivilegeLogin=1;class c extends u{constructor(e){super(5),this.__user_id=e||""}pack(){let e=new f;return e.putString(this.__user_id),Buffer.concat([super.pack(),e.pack()])}unpack(e){let t=super.unpack(e);return this.__user_id=t.getString(),t}}c.kPrivilegeUser=1,c.kPrivilegeApp=2;class l extends u{constructor(e,t,r){super(7),this.__room_uuid=e||"",this.__user_uuid=t||"",this.__role=r||-1}pack(){let e=new f;return e.putString(this.__room_uuid),e.putString(this.__user_uuid),e.putInt16(this.__role),Buffer.concat([super.pack(),e.pack()])}unpack(e){let t=super.unpack(e);return this.__room_uuid=t.getString(),this.__user_uuid=t.getString(),this.__role=t.getInt16(),t}}l.PRIVILEGE_ROOM_USER=1,l.PRIVILEGE_USER=2,l.PRIVILEGE_APP=3;class d{constructor(e,t,r,i){this.appId=e,this.appCertificate=t,this.issueTs=r||new Date().getTime()/1e3,this.expire=i,this.salt=Math.floor(0x5f5e0ff*Math.random())+1,this.services={}}__signing(){let e=p(new f().putUint32(this.issueTs).pack(),this.appCertificate);return p(new f().putUint32(this.salt).pack(),e)}__build_check(){let e=e=>32===e.length&&!!Buffer.from(e,"hex"),{appId:t,appCertificate:r,services:i}=this;return!!e(t)&&!!e(r)&&0!==Object.keys(i).length}add_service(e){this.services[e.service_type()]=e}build(){if(!this.__build_check())return"";let e=this.__signing(),t=new f().putString(this.appId).putUint32(this.issueTs).putUint32(this.expire).putUint32(this.salt).putUint16(Object.keys(this.services).length).pack();Object.values(this.services).forEach(e=>{t=Buffer.concat([t,e.pack()])});let r=p(e,t),i=Buffer.concat([new f().putString(r).pack(),t]),u=n.deflateSync(i);return`007${Buffer.from(u).toString("base64")}`}from_string(e){if("007"!==e.substring(0,3))return!1;let t=e.substring(3,e.length),r=new g(n.inflateSync(new Buffer(t,"base64")));r.getString(),this.appId=r.getString(),this.issueTs=r.getUint32(),this.expire=r.getUint32(),this.salt=r.getUint32();let i=r.getUint16(),u=r.pack();for(let e=0;e<i;e++){let e=new g(u),t=e.getUint16(),r=new d.kServices[t];u=r.unpack(e.pack()).pack(),this.services[t]=r}}}var p=function(e,t){return i.createHmac("sha256",e).update(t).digest()},f=function(){var e={buffer:Buffer.alloc(1024),position:0};return e.buffer.fill(0),e.pack=function(){var t=Buffer.alloc(e.position);return e.buffer.copy(t,0,0,t.length),t},e.putUint16=function(t){return e.buffer.writeUInt16LE(t,e.position),e.position+=2,e},e.putUint32=function(t){return e.buffer.writeUInt32LE(t,e.position),e.position+=4,e},e.putInt32=function(t){return e.buffer.writeInt32LE(t,e.position),e.position+=4,e},e.putInt16=function(t){return e.buffer.writeInt16LE(t,e.position),e.position+=2,e},e.putBytes=function(t){return e.putUint16(t.length),t.copy(e.buffer,e.position),e.position+=t.length,e},e.putString=function(t){return e.putBytes(Buffer.from(t))},e.putTreeMap=function(t){if(!t)return e.putUint16(0),e;for(var r in e.putUint16(Object.keys(t).length),t)e.putUint16(r),e.putString(t[r]);return e},e.putTreeMapUInt32=function(t){if(!t)return e.putUint16(0),e;for(var r in e.putUint16(Object.keys(t).length),t)e.putUint16(r),e.putUint32(t[r]);return e},e},g=function(e){var t={buffer:e,position:0};return t.getUint16=function(){var e=t.buffer.readUInt16LE(t.position);return t.position+=2,e},t.getUint32=function(){var e=t.buffer.readUInt32LE(t.position);return t.position+=4,e},t.getInt16=function(){var e=t.buffer.readUInt16LE(t.position);return t.position+=2,e},t.getString=function(){var e=t.getUint16(),r=Buffer.alloc(e);return t.buffer.copy(r,0,t.position,t.position+e),t.position+=e,r},t.getTreeMapUInt32=function(){for(var e={},r=t.getUint16(),i=0;i<r;i++){var n=t.getUint16(),u=t.getUint32();e[n]=u}return e},t.pack=function(){let e=t.buffer.length;var r=Buffer.alloc(e);return t.buffer.copy(r,0,t.position,e),r},t};d.kServices={},d.kServices[7]=l,d.kServices[5]=c,d.kServices[4]=o,d.kServices[1]=s,d.kServices[2]=a,t.exports={AccessToken2:d,kApaasServiceType:7,kChatServiceType:5,kFpaServiceType:4,kRtcServiceType:1,kRtmServiceType:2,ServiceApaas:l,ServiceChat:c,ServiceFpa:o,ServiceRtc:s,ServiceRtm:a}},73773,(e,t,r)=>{let i=e.r(55391),n=e.r(44651).AccessToken2,u=e.r(44651).ServiceApaas,s=e.r(44651).ServiceChat,a=e.r(44651).ServiceRtm;t.exports.ApaasTokenBuilder=class{static buildRoomUserToken(e,t,r,o,c,l){let d=new n(e,t,0,l),p=i(o),f=new u(r,o,c);d.add_service(f);let g=new a(o);g.add_privilege(a.kPrivilegeLogin,l),d.add_service(g);let _=new s(p);return _.add_privilege(s.kPrivilegeUser,l),d.add_service(_),d.build()}static buildUserToken(e,t,r,i){let s=new n(e,t,0,i),a=new u("",r);return a.add_privilege(u.PRIVILEGE_USER,i),s.add_service(a),s.build()}static buildAppToken(e,t,r){let i=new n(e,t,0,r),s=new u;return s.add_privilege(u.PRIVILEGE_APP,r),i.add_service(s),i.build()}}},26953,(e,t,r)=>{let i=e.r(44651).AccessToken2,n=e.r(44651).ServiceChat;r.ChatTokenBuilder=class{static buildUserToken(e,t,r,u){let s=new i(e,t,null,u),a=new n(r);return a.add_privilege(n.kPrivilegeUser,u),s.add_service(a),s.build()}static buildAppToken(e,t,r){let u=new i(e,t,null,r),s=new n;return s.add_privilege(n.kPrivilegeApp,r),u.add_service(s),u.build()}}},85511,(e,t,r)=>{let i=e.r(55391),n=e.r(44651).AccessToken2,u=e.r(44651).ServiceApaas,s=e.r(44651).ServiceChat,a=e.r(44651).ServiceRtm;t.exports.EducationTokenBuilder=class{static buildRoomUserToken(e,t,r,o,c,l){let d=new n(e,t,0,l),p=i(o),f=new u(r,o,c);d.add_service(f);let g=new a(o);g.add_privilege(a.kPrivilegeLogin,l),d.add_service(g);let _=new s(p);return _.add_privilege(s.kPrivilegeUser,l),d.add_service(_),d.build()}static buildUserToken(e,t,r,i){let s=new n(e,t,0,i),a=new u("",r);return a.add_privilege(u.PRIVILEGE_USER,i),s.add_service(a),s.build()}static buildAppToken(e,t,r){let i=new n(e,t,0,r),s=new u;return s.add_privilege(u.PRIVILEGE_APP,r),i.add_service(s),i.build()}}},70496,(e,t,r)=>{let i=e.r(44651).AccessToken2,n=e.r(44651).ServiceFpa;t.exports.FpaTokenBuilder=class{static buildToken(e,t){let r=new i(e,t,0,86400),u=new n;return u.add_privilege(n.kPrivilegeLogin,0),r.add_service(u),r.build()}}},2910,(e,t,r)=>{let i=e.r(44651).AccessToken2,n=e.r(44651).ServiceRtc,u=e.r(44651).ServiceRtm,s={PUBLISHER:1,SUBSCRIBER:2};t.exports.RtcTokenBuilder=class{static buildTokenWithUid(e,t,r,i,n,u,s=0){return this.buildTokenWithUserAccount(e,t,r,i,n,u,s)}static buildTokenWithUserAccount(e,t,r,u,a,o,c=0){let l=new i(e,t,0,o),d=new n(r,u);return d.add_privilege(n.kPrivilegeJoinChannel,c),a==s.PUBLISHER&&(d.add_privilege(n.kPrivilegePublishAudioStream,c),d.add_privilege(n.kPrivilegePublishVideoStream,c),d.add_privilege(n.kPrivilegePublishDataStream,c)),l.add_service(d),l.build()}static buildTokenWithUidAndPrivilege(e,t,r,i,n,u,s,a,o){return this.BuildTokenWithUserAccountAndPrivilege(e,t,r,i,n,u,s,a,o)}static BuildTokenWithUserAccountAndPrivilege(e,t,r,u,s,a,o,c,l){let d=new i(e,t,0,s),p=new n(r,u);return p.add_privilege(n.kPrivilegeJoinChannel,a),p.add_privilege(n.kPrivilegePublishAudioStream,o),p.add_privilege(n.kPrivilegePublishVideoStream,c),p.add_privilege(n.kPrivilegePublishDataStream,l),d.add_service(p),d.build()}static buildTokenWithRtm(e,t,r,a,o,c,l=0){let d=new i(e,t,0,c),p=new n(r,a);p.add_privilege(n.kPrivilegeJoinChannel,l),o==s.PUBLISHER&&(p.add_privilege(n.kPrivilegePublishAudioStream,l),p.add_privilege(n.kPrivilegePublishVideoStream,l),p.add_privilege(n.kPrivilegePublishDataStream,l)),d.add_service(p);let f=new u(a);return f.add_privilege(u.kPrivilegeLogin,c),d.add_service(f),d.build()}static buildTokenWithRtm2(e,t,r,a,o,c,l,d,p,f,g,_){let v=new i(e,t,0,c),h=new n(r,a);h.add_privilege(n.kPrivilegeJoinChannel,l),o==s.PUBLISHER&&(h.add_privilege(n.kPrivilegePublishAudioStream,d),h.add_privilege(n.kPrivilegePublishVideoStream,p),h.add_privilege(n.kPrivilegePublishDataStream,f)),v.add_service(h);let k=new u(g);return k.add_privilege(u.kPrivilegeLogin,_),v.add_service(k),v.build()}},t.exports.Role=s},77764,(e,t,r)=>{let i=e.r(44651).AccessToken2,n=e.r(44651).ServiceRtm;t.exports.RtmTokenBuilder=class{static buildToken(e,t,r,u){let s=new i(e,t,null,u),a=new n(r);return a.add_privilege(n.kPrivilegeLogin,u),s.add_service(a),s.build()}}},32790,(e,t,r)=>{t.exports={ApaasTokenBuilder:e.r(73773).ApaasTokenBuilder,ChatTokenBuilder:e.r(26953).ChatTokenBuilder,EducationTokenBuilder:e.r(85511).EducationTokenBuilder,FpaTokenBuilder:e.r(70496).FpaTokenBuilder,RtcRole:e.r(2910).Role,RtcTokenBuilder:e.r(2910).RtcTokenBuilder,RtmTokenBuilder:e.r(77764).RtmTokenBuilder}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fdb08391._.js.map