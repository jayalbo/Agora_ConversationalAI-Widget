(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42778,(t,e,n)=>{(function(){var r,i="Expected a function",u="__lodash_hash_undefined__",a="__lodash_placeholder__",s=1/0,o=0/0,l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],c="[object Arguments]",f="[object Array]",h="[object Boolean]",d="[object Date]",g="[object Error]",p="[object Function]",_="[object GeneratorFunction]",v="[object Map]",m="[object Number]",y="[object Object]",b="[object Promise]",x="[object RegExp]",E="[object Set]",w="[object String]",S="[object Symbol]",N="[object WeakMap]",R="[object ArrayBuffer]",M="[object DataView]",T="[object Float32Array]",A="[object Float64Array]",I="[object Int8Array]",j="[object Int16Array]",P="[object Int32Array]",C="[object Uint8Array]",O="[object Uint8ClampedArray]",$="[object Uint16Array]",D="[object Uint32Array]",U=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,L=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,z=RegExp(G.source),H=RegExp(W.source),B=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J=/[\\^$.*+?()[\]{}|]/g,X=RegExp(J.source),Z=/^\s+/,Y=/\s/,tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,te=/\{\n\/\* \[wrapped with (.+)\] \*/,tn=/,? & /,tr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ti=/[()=,{}\[\]\/\s]/,tu=/\\(\\)?/g,ta=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ts=/\w*$/,to=/^[-+]0x[0-9a-f]+$/i,tl=/^0b[01]+$/i,tc=/^\[object .+?Constructor\]$/,tf=/^0o[0-7]+$/i,th=/^(?:0|[1-9]\d*)$/,td=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tg=/($^)/,tp=/['\n\r\u2028\u2029\\]/g,t_="\ud800-\udfff",tv="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",tm="\\u2700-\\u27bf",ty="a-z\\xdf-\\xf6\\xf8-\\xff",tb="A-Z\\xc0-\\xd6\\xd8-\\xde",tx="\\ufe0e\\ufe0f",tE="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tw="['’]",tS="["+tE+"]",tN="["+tv+"]",tR="["+ty+"]",tM="[^"+t_+tE+"\\d+"+tm+ty+tb+"]",tT="\ud83c[\udffb-\udfff]",tA="[^"+t_+"]",tI="(?:\ud83c[\udde6-\uddff]){2}",tj="[\ud800-\udbff][\udc00-\udfff]",tP="["+tb+"]",tC="\\u200d",tO="(?:"+tR+"|"+tM+")",t$="(?:"+tP+"|"+tM+")",tD="(?:"+tw+"(?:d|ll|m|re|s|t|ve))?",tU="(?:"+tw+"(?:D|LL|M|RE|S|T|VE))?",tk="(?:"+tN+"|"+tT+")?",tL="["+tx+"]?",tG="(?:"+tC+"(?:"+[tA,tI,tj].join("|")+")"+tL+tk+")*",tW=tL+tk+tG,tz="(?:"+["["+tm+"]",tI,tj].join("|")+")"+tW,tH="(?:"+[tA+tN+"?",tN,tI,tj,"["+t_+"]"].join("|")+")",tB=RegExp(tw,"g"),tF=RegExp(tN,"g"),tq=RegExp(tT+"(?="+tT+")|"+tH+tW,"g"),tK=RegExp([tP+"?"+tR+"+"+tD+"(?="+[tS,tP,"$"].join("|")+")",t$+"+"+tU+"(?="+[tS,tP+tO,"$"].join("|")+")",tP+"?"+tO+"+"+tD,tP+"+"+tU,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",tz].join("|"),"g"),tV=RegExp("["+tC+t_+tv+tx+"]"),tQ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tJ=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tX=-1,tZ={};tZ[T]=tZ[A]=tZ[I]=tZ[j]=tZ[P]=tZ[C]=tZ[O]=tZ[$]=tZ[D]=!0,tZ[c]=tZ[f]=tZ[R]=tZ[h]=tZ[M]=tZ[d]=tZ[g]=tZ[p]=tZ[v]=tZ[m]=tZ[y]=tZ[x]=tZ[E]=tZ[w]=tZ[N]=!1;var tY={};tY[c]=tY[f]=tY[R]=tY[M]=tY[h]=tY[d]=tY[T]=tY[A]=tY[I]=tY[j]=tY[P]=tY[v]=tY[m]=tY[y]=tY[x]=tY[E]=tY[w]=tY[S]=tY[C]=tY[O]=tY[$]=tY[D]=!0,tY[g]=tY[p]=tY[N]=!1;var t0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t1=parseFloat,t2=parseInt,t3=t.g&&t.g.Object===Object&&t.g,t6="object"==typeof self&&self&&self.Object===Object&&self,t4=t3||t6||Function("return this")(),t8=n&&!n.nodeType&&n,t7=t8&&e&&!e.nodeType&&e,t5=t7&&t7.exports===t8,t9=t5&&t3.process,et=function(){try{var t=t7&&t7.require&&t7.require("util").types;if(t)return t;return t9&&t9.binding&&t9.binding("util")}catch(t){}}(),ee=et&&et.isArrayBuffer,en=et&&et.isDate,er=et&&et.isMap,ei=et&&et.isRegExp,eu=et&&et.isSet,ea=et&&et.isTypedArray;function es(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function eo(t,e,n,r){for(var i=-1,u=null==t?0:t.length;++i<u;){var a=t[i];e(r,a,n(a),t)}return r}function el(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ec(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ef(t,e){for(var n=-1,r=null==t?0:t.length,i=0,u=[];++n<r;){var a=t[n];e(a,n,t)&&(u[i++]=a)}return u}function eh(t,e){return!!(null==t?0:t.length)&&eE(t,e,0)>-1}function ed(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function eg(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function ep(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function e_(t,e,n,r){var i=-1,u=null==t?0:t.length;for(r&&u&&(n=t[++i]);++i<u;)n=e(n,t[i],i,t);return n}function ev(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function em(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ey=eR("length");function eb(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function ex(t,e,n,r){for(var i=t.length,u=n+(r?1:-1);r?u--:++u<i;)if(e(t[u],u,t))return u;return -1}function eE(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return -1}(t,e,n):ex(t,eS,n)}function ew(t,e,n,r){for(var i=n-1,u=t.length;++i<u;)if(r(t[i],e))return i;return -1}function eS(t){return t!=t}function eN(t,e){var n=null==t?0:t.length;return n?eA(t,e)/n:o}function eR(t){return function(e){return null==e?r:e[t]}}function eM(t){return function(e){return null==t?r:t[e]}}function eT(t,e,n,r,i){return i(t,function(t,i,u){n=r?(r=!1,t):e(n,t,i,u)}),n}function eA(t,e){for(var n,i=-1,u=t.length;++i<u;){var a=e(t[i]);r!==a&&(n=r===n?a:n+a)}return n}function eI(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function ej(t){return t?t.slice(0,eK(t)+1).replace(Z,""):t}function eP(t){return function(e){return t(e)}}function eC(t,e){return eg(e,function(e){return t[e]})}function eO(t,e){return t.has(e)}function e$(t,e){for(var n=-1,r=t.length;++n<r&&eE(e,t[n],0)>-1;);return n}function eD(t,e){for(var n=t.length;n--&&eE(e,t[n],0)>-1;);return n}var eU=eM({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),ek=eM({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function eL(t){return"\\"+t0[t]}function eG(t){return tV.test(t)}function eW(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function ez(t,e){return function(n){return t(e(n))}}function eH(t,e){for(var n=-1,r=t.length,i=0,u=[];++n<r;){var s=t[n];(s===e||s===a)&&(t[n]=a,u[i++]=n)}return u}function eB(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function eF(t){return eG(t)?function(t){for(var e=tq.lastIndex=0;tq.test(t);)++e;return e}(t):ey(t)}function eq(t){return eG(t)?t.match(tq)||[]:t.split("")}function eK(t){for(var e=t.length;e--&&Y.test(t.charAt(e)););return e}var eV=eM({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),eQ=function t(e){var n,Y,t_,tv,tm=(e=null==e?t4:eQ.defaults(t4.Object(),e,eQ.pick(t4,tJ))).Array,ty=e.Date,tb=e.Error,tx=e.Function,tE=e.Math,tw=e.Object,tS=e.RegExp,tN=e.String,tR=e.TypeError,tM=tm.prototype,tT=tx.prototype,tA=tw.prototype,tI=e["__core-js_shared__"],tj=tT.toString,tP=tA.hasOwnProperty,tC=0,tO=(n=/[^.]+$/.exec(tI&&tI.keys&&tI.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",t$=tA.toString,tD=tj.call(tw),tU=t4._,tk=tS("^"+tj.call(tP).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tL=t5?e.Buffer:r,tG=e.Symbol,tW=e.Uint8Array,tz=tL?tL.allocUnsafe:r,tH=ez(tw.getPrototypeOf,tw),tq=tw.create,tV=tA.propertyIsEnumerable,t0=tM.splice,t3=tG?tG.isConcatSpreadable:r,t6=tG?tG.iterator:r,t8=tG?tG.toStringTag:r,t7=function(){try{var t=ig(tw,"defineProperty");return t({},"",{}),t}catch(t){}}(),t9=e.clearTimeout!==t4.clearTimeout&&e.clearTimeout,et=ty&&ty.now!==t4.Date.now&&ty.now,ey=e.setTimeout!==t4.setTimeout&&e.setTimeout,eM=tE.ceil,eJ=tE.floor,eX=tw.getOwnPropertySymbols,eZ=tL?tL.isBuffer:r,eY=e.isFinite,e0=tM.join,e1=ez(tw.keys,tw),e2=tE.max,e3=tE.min,e6=ty.now,e4=e.parseInt,e8=tE.random,e7=tM.reverse,e5=ig(e,"DataView"),e9=ig(e,"Map"),nt=ig(e,"Promise"),ne=ig(e,"Set"),nn=ig(e,"WeakMap"),nr=ig(tw,"create"),ni=nn&&new nn,nu={},na=iL(e5),ns=iL(e9),no=iL(nt),nl=iL(ne),nc=iL(nn),nf=tG?tG.prototype:r,nh=nf?nf.valueOf:r,nd=nf?nf.toString:r;function ng(t){if(uV(t)&&!uU(t)&&!(t instanceof nm)){if(t instanceof nv)return t;if(tP.call(t,"__wrapped__"))return iG(t)}return new nv(t)}var np=function(){function t(){}return function(e){if(!uK(e))return{};if(tq)return tq(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function n_(){}function nv(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function nm(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function ny(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nb(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nx(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nE(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new nx;++e<n;)this.add(t[e])}function nw(t){var e=this.__data__=new nb(t);this.size=e.size}function nS(t,e){var n=uU(t),r=!n&&uD(t),i=!n&&!r&&uW(t),u=!n&&!r&&!i&&u2(t),a=n||r||i||u,s=a?eI(t.length,tN):[],o=s.length;for(var l in t)(e||tP.call(t,l))&&!(a&&("length"==l||i&&("offset"==l||"parent"==l)||u&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ix(l,o)))&&s.push(l);return s}function nN(t){var e=t.length;return e?t[rl(0,e-1)]:r}ng.templateSettings={escape:B,evaluate:F,interpolate:q,variable:"",imports:{_:ng}},ng.prototype=n_.prototype,ng.prototype.constructor=ng,nv.prototype=np(n_.prototype),nv.prototype.constructor=nv,nm.prototype=np(n_.prototype),nm.prototype.constructor=nm,ny.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},ny.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=!!e,e},ny.prototype.get=function(t){var e=this.__data__;if(nr){var n=e[t];return n===u?r:n}return tP.call(e,t)?e[t]:r},ny.prototype.has=function(t){var e=this.__data__;return nr?e[t]!==r:tP.call(e,t)},ny.prototype.set=function(t,e){var n=this.__data__;return this.size+=+!this.has(t),n[t]=nr&&r===e?u:e,this},nb.prototype.clear=function(){this.__data__=[],this.size=0},nb.prototype.delete=function(t){var e=this.__data__,n=nT(e,t);return!(n<0)&&(n==e.length-1?e.pop():t0.call(e,n,1),--this.size,!0)},nb.prototype.get=function(t){var e=this.__data__,n=nT(e,t);return n<0?r:e[n][1]},nb.prototype.has=function(t){return nT(this.__data__,t)>-1},nb.prototype.set=function(t,e){var n=this.__data__,r=nT(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},nx.prototype.clear=function(){this.size=0,this.__data__={hash:new ny,map:new(e9||nb),string:new ny}},nx.prototype.delete=function(t){var e=ih(this,t).delete(t);return this.size-=!!e,e},nx.prototype.get=function(t){return ih(this,t).get(t)},nx.prototype.has=function(t){return ih(this,t).has(t)},nx.prototype.set=function(t,e){var n=ih(this,t),r=n.size;return n.set(t,e),this.size+=+(n.size!=r),this},nE.prototype.add=nE.prototype.push=function(t){return this.__data__.set(t,u),this},nE.prototype.has=function(t){return this.__data__.has(t)};function nR(t,e,n){(r===n||uC(t[e],n))&&(r!==n||e in t)||nj(t,e,n)}function nM(t,e,n){var i=t[e];tP.call(t,e)&&uC(i,n)&&(r!==n||e in t)||nj(t,e,n)}function nT(t,e){for(var n=t.length;n--;)if(uC(t[n][0],e))return n;return -1}function nA(t,e,n,r){return nk(t,function(t,i,u){e(r,t,n(t),u)}),r}function nI(t,e){return t&&rW(e,ag(e),t)}function nj(t,e,n){"__proto__"==e&&t7?t7(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function nP(t,e){for(var n=-1,i=e.length,u=tm(i),a=null==t;++n<i;)u[n]=a?r:al(t,e[n]);return u}function nC(t,e,n){return t==t&&(r!==n&&(t=t<=n?t:n),r!==e&&(t=t>=e?t:e)),t}function nO(t,e,n,i,u,a){var s,o=1&e,l=2&e,f=4&e;if(n&&(s=u?n(t,i,u,a):n(t)),r!==s)return s;if(!uK(t))return t;var g=uU(t);if(g){if(N=(b=t).length,U=new b.constructor(N),N&&"string"==typeof b[0]&&tP.call(b,"index")&&(U.index=b.index,U.input=b.input),s=U,!o)return rG(t,s)}else{var b,N,U,k,L,G,W,z,H=iv(t),B=H==p||H==_;if(uW(t))return rO(t,o);if(H==y||H==c||B&&!u){if(s=l||B?{}:iy(t),!o){return l?(k=t,L=(z=s)&&rW(t,ap(t),z),rW(k,i_(k),L)):(G=t,W=nI(s,t),rW(G,ip(G),W))}}else{if(!tY[H])return u?t:{};s=function(t,e,n){var r,i,u=t.constructor;switch(e){case R:return r$(t);case h:case d:return new u(+t);case M:return r=n?r$(t.buffer):t.buffer,new t.constructor(r,t.byteOffset,t.byteLength);case T:case A:case I:case j:case P:case C:case O:case $:case D:return rD(t,n);case v:return new u;case m:case w:return new u(t);case x:return(i=new t.constructor(t.source,ts.exec(t))).lastIndex=t.lastIndex,i;case E:return new u;case S:return nh?tw(nh.call(t)):{}}}(t,H,o)}}a||(a=new nw);var F=a.get(t);if(F)return F;a.set(t,s),uY(t)?t.forEach(function(r){s.add(nO(r,e,n,r,t,a))}):uQ(t)&&t.forEach(function(r,i){s.set(i,nO(r,e,n,i,t,a))});var q=f?l?ia:iu:l?ap:ag,K=g?r:q(t);return el(K||t,function(r,i){K&&(r=t[i=r]),nM(s,i,nO(r,e,n,i,t,a))}),s}function n$(t,e,n){var i=n.length;if(null==t)return!i;for(t=tw(t);i--;){var u=n[i],a=e[u],s=t[u];if(r===s&&!(u in t)||!a(s))return!1}return!0}function nD(t,e,n){if("function"!=typeof t)throw new tR(i);return iP(function(){t.apply(r,n)},e)}function nU(t,e,n,r){var i=-1,u=eh,a=!0,s=t.length,o=[],l=e.length;if(!s)return o;n&&(e=eg(e,eP(n))),r?(u=ed,a=!1):e.length>=200&&(u=eO,a=!1,e=new nE(e));t:for(;++i<s;){var c=t[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var h=l;h--;)if(e[h]===f)continue t;o.push(c)}else u(e,f,r)||o.push(c)}return o}nw.prototype.clear=function(){this.__data__=new nb,this.size=0},nw.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},nw.prototype.get=function(t){return this.__data__.get(t)},nw.prototype.has=function(t){return this.__data__.has(t)},nw.prototype.set=function(t,e){var n=this.__data__;if(n instanceof nb){var r=n.__data__;if(!e9||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new nx(r)}return n.set(t,e),this.size=n.size,this};var nk=rB(nq),nL=rB(nK,!0);function nG(t,e){var n=!0;return nk(t,function(t,r,i){return n=!!e(t,r,i)}),n}function nW(t,e,n){for(var i=-1,u=t.length;++i<u;){var a=t[i],s=e(a);if(null!=s&&(r===o?s==s&&!u1(s):n(s,o)))var o=s,l=a}return l}function nz(t,e){var n=[];return nk(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function nH(t,e,n,r,i){var u=-1,a=t.length;for(n||(n=ib),i||(i=[]);++u<a;){var s=t[u];e>0&&n(s)?e>1?nH(s,e-1,n,r,i):ep(i,s):r||(i[i.length]=s)}return i}var nB=rF(),nF=rF(!0);function nq(t,e){return t&&nB(t,e,ag)}function nK(t,e){return t&&nF(t,e,ag)}function nV(t,e){return ef(e,function(e){return uB(t[e])})}function nQ(t,e){e=rj(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[ik(e[n++])];return n&&n==i?t:r}function nJ(t,e,n){var r=e(t);return uU(t)?r:ep(r,n(t))}function nX(t){var e;return null==t?r===t?"[object Undefined]":"[object Null]":t8&&t8 in tw(t)?function(t){var e=tP.call(t,t8),n=t[t8];try{t[t8]=r;var i=!0}catch(t){}var u=t$.call(t);return i&&(e?t[t8]=n:delete t[t8]),u}(t):(e=t,t$.call(e))}function nZ(t,e){return t>e}function nY(t,e){return null!=t&&tP.call(t,e)}function n0(t,e){return null!=t&&e in tw(t)}function n1(t,e,n){for(var i=n?ed:eh,u=t[0].length,a=t.length,s=a,o=tm(a),l=1/0,c=[];s--;){var f=t[s];s&&e&&(f=eg(f,eP(e))),l=e3(f.length,l),o[s]=!n&&(e||u>=120&&f.length>=120)?new nE(s&&f):r}f=t[0];var h=-1,d=o[0];t:for(;++h<u&&c.length<l;){var g=f[h],p=e?e(g):g;if(g=n||0!==g?g:0,!(d?eO(d,p):i(c,p,n))){for(s=a;--s;){var _=o[s];if(!(_?eO(_,p):i(t[s],p,n)))continue t}d&&d.push(p),c.push(g)}}return c}function n2(t,e,n){e=rj(e,t);var i=null==(t=iA(t,e))?t:t[ik(iX(e))];return null==i?r:es(i,t,n)}function n3(t){return uV(t)&&nX(t)==c}function n6(t,e,n,i,u){return t===e||(null!=t&&null!=e&&(uV(t)||uV(e))?function(t,e,n,i,u,a){var s=uU(t),o=uU(e),l=s?f:iv(t),p=o?f:iv(e);l=l==c?y:l,p=p==c?y:p;var _=l==y,b=p==y,N=l==p;if(N&&uW(t)){if(!uW(e))return!1;s=!0,_=!1}if(N&&!_)return a||(a=new nw),s||u2(t)?ir(t,e,n,i,u,a):function(t,e,n,r,i,u,a){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case R:if(t.byteLength!=e.byteLength||!u(new tW(t),new tW(e)))break;return!0;case h:case d:case m:return uC(+t,+e);case g:return t.name==e.name&&t.message==e.message;case x:case w:return t==e+"";case v:var s=eW;case E:var o=1&r;if(s||(s=eB),t.size!=e.size&&!o)break;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=ir(s(t),s(e),r,i,u,a);return a.delete(t),c;case S:if(nh)return nh.call(t)==nh.call(e)}return!1}(t,e,l,n,i,u,a);if(!(1&n)){var T=_&&tP.call(t,"__wrapped__"),A=b&&tP.call(e,"__wrapped__");if(T||A){var I=T?t.value():t,j=A?e.value():e;return a||(a=new nw),u(I,j,n,i,a)}}return!!N&&(a||(a=new nw),function(t,e,n,i,u,a){var s=1&n,o=iu(t),l=o.length;if(l!=iu(e).length&&!s)return!1;for(var c=l;c--;){var f=o[c];if(!(s?f in e:tP.call(e,f)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var g=!0;a.set(t,e),a.set(e,t);for(var p=s;++c<l;){var _=t[f=o[c]],v=e[f];if(i)var m=s?i(v,_,f,e,t,a):i(_,v,f,t,e,a);if(!(r===m?_===v||u(_,v,n,i,a):m)){g=!1;break}p||(p="constructor"==f)}if(g&&!p){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(g=!1)}return a.delete(t),a.delete(e),g}(t,e,n,i,u,a))}(t,e,n,i,n6,u):t!=t&&e!=e)}function n4(t,e,n,i){var u=n.length,a=u,s=!i;if(null==t)return!a;for(t=tw(t);u--;){var o=n[u];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++u<a;){var l=(o=n[u])[0],c=t[l],f=o[1];if(s&&o[2]){if(r===c&&!(l in t))return!1}else{var h=new nw;if(i)var d=i(c,f,l,t,e,h);if(!(r===d?n6(f,c,3,i,h):d))return!1}}return!0}function n8(t){var e;return!(!uK(t)||(e=t,tO&&tO in e))&&(uB(t)?tk:tc).test(iL(t))}function n7(t){return"function"==typeof t?t:null==t?aG:"object"==typeof t?uU(t)?rn(t[0],t[1]):re(t):aQ(t)}function n5(t){if(!iR(t))return e1(t);var e=[];for(var n in tw(t))tP.call(t,n)&&"constructor"!=n&&e.push(n);return e}function n9(t,e){return t<e}function rt(t,e){var n=-1,r=uL(t)?tm(t.length):[];return nk(t,function(t,i,u){r[++n]=e(t,i,u)}),r}function re(t){var e=id(t);return 1==e.length&&e[0][2]?iM(e[0][0],e[0][1]):function(n){return n===t||n4(n,t,e)}}function rn(t,e){var n;return iw(t)&&(n=e)==n&&!uK(n)?iM(ik(t),e):function(n){var i=al(n,t);return r===i&&i===e?ac(n,t):n6(e,i,3)}}function rr(t,e,n,i,u){t!==e&&nB(e,function(a,s){if(u||(u=new nw),uK(a))!function(t,e,n,i,u,a,s){var o=iI(t,n),l=iI(e,n),c=s.get(l);if(c)return nR(t,n,c);var f=a?a(o,l,n+"",t,e,s):r,h=r===f;if(h){var d=uU(l),g=!d&&uW(l),p=!d&&!g&&u2(l);f=l,d||g||p?uU(o)?f=o:uG(o)?f=rG(o):g?(h=!1,f=rO(l,!0)):p?(h=!1,f=rD(l,!0)):f=[]:uX(l)||uD(l)?(f=o,uD(o)?f=at(o):(!uK(o)||uB(o))&&(f=iy(l))):h=!1}h&&(s.set(l,f),u(f,l,i,a,s),s.delete(l)),nR(t,n,f)}(t,e,s,n,rr,i,u);else{var o=i?i(iI(t,s),a,s+"",t,e,u):r;r===o&&(o=a),nR(t,s,o)}},ap)}function ri(t,e){var n=t.length;if(n)return ix(e+=e<0?n:0,n)?t[e]:r}function ru(t,e,n){e=e.length?eg(e,function(t){return uU(t)?function(e){return nQ(e,1===t.length?t[0]:t)}:t}):[aG];var r=-1;e=eg(e,eP(ic()));var i=rt(t,function(t,n,i){return{criteria:eg(e,function(e){return e(t)}),index:++r,value:t}}),u=i.length;for(i.sort(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,u=e.criteria,a=i.length,s=n.length;++r<a;){var o=rU(i[r],u[r]);if(o){if(r>=s)return o;return o*("desc"==n[r]?-1:1)}}return t.index-e.index}(t,e,n)});u--;)i[u]=i[u].value;return i}function ra(t,e,n){for(var r=-1,i=e.length,u={};++r<i;){var a=e[r],s=nQ(t,a);n(s,a)&&rh(u,rj(a,t),s)}return u}function rs(t,e,n,r){var i=r?ew:eE,u=-1,a=e.length,s=t;for(t===e&&(e=rG(e)),n&&(s=eg(t,eP(n)));++u<a;)for(var o=0,l=e[u],c=n?n(l):l;(o=i(s,c,o,r))>-1;)s!==t&&t0.call(s,o,1),t0.call(t,o,1);return t}function ro(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==u){var u=i;ix(i)?t0.call(t,i,1):rw(t,i)}}return t}function rl(t,e){return t+eJ(e8()*(e-t+1))}function rc(t,e){var n="";if(!t||e<1||e>0x1fffffffffffff)return n;do e%2&&(n+=t),(e=eJ(e/2))&&(t+=t);while(e)return n}function rf(t,e){return iC(iT(t,e,aG),t+"")}function rh(t,e,n,i){if(!uK(t))return t;e=rj(e,t);for(var u=-1,a=e.length,s=a-1,o=t;null!=o&&++u<a;){var l=ik(e[u]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)break;if(u!=s){var f=o[l];c=i?i(f,l,o):r,r===c&&(c=uK(f)?f:ix(e[u+1])?[]:{})}nM(o,l,c),o=o[l]}return t}var rd=ni?function(t,e){return ni.set(t,e),t}:aG,rg=t7?function(t,e){return t7(t,"toString",{configurable:!0,enumerable:!1,value:aU(e),writable:!0})}:aG;function rp(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var u=tm(i);++r<i;)u[r]=t[r+e];return u}function r_(t,e){var n;return nk(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function rv(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=0x7fffffff){for(;r<i;){var u=r+i>>>1,a=t[u];null!==a&&!u1(a)&&(n?a<=e:a<e)?r=u+1:i=u}return i}return rm(t,e,aG,n)}function rm(t,e,n,i){var u=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,o=null===e,l=u1(e),c=r===e;u<a;){var f=eJ((u+a)/2),h=n(t[f]),d=r!==h,g=null===h,p=h==h,_=u1(h);if(s)var v=i||p;else v=c?p&&(i||d):o?p&&d&&(i||!g):l?p&&d&&!g&&(i||!_):!g&&!_&&(i?h<=e:h<e);v?u=f+1:a=f}return e3(a,0xfffffffe)}function ry(t,e){for(var n=-1,r=t.length,i=0,u=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!uC(s,o)){var o=s;u[i++]=0===a?0:a}}return u}function rb(t){return"number"==typeof t?t:u1(t)?o:+t}function rx(t){if("string"==typeof t)return t;if(uU(t))return eg(t,rx)+"";if(u1(t))return nd?nd.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}function rE(t,e,n){var r=-1,i=eh,u=t.length,a=!0,s=[],o=s;if(n)a=!1,i=ed;else if(u>=200){var l=e?null:r8(t);if(l)return eB(l);a=!1,i=eO,o=new nE}else o=e?[]:s;t:for(;++r<u;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var h=o.length;h--;)if(o[h]===f)continue t;e&&o.push(f),s.push(c)}else i(o,f,n)||(o!==s&&o.push(f),s.push(c))}return s}function rw(t,e){return e=rj(e,t),null==(t=iA(t,e))||delete t[ik(iX(e))]}function rS(t,e,n,r){return rh(t,e,n(nQ(t,e)),r)}function rN(t,e,n,r){for(var i=t.length,u=r?i:-1;(r?u--:++u<i)&&e(t[u],u,t););return n?rp(t,r?0:u,r?u+1:i):rp(t,r?u+1:0,r?i:u)}function rR(t,e){var n=t;return n instanceof nm&&(n=n.value()),e_(e,function(t,e){return e.func.apply(e.thisArg,ep([t],e.args))},n)}function rM(t,e,n){var r=t.length;if(r<2)return r?rE(t[0]):[];for(var i=-1,u=tm(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(u[i]=nU(u[i]||a,t[s],e,n));return rE(nH(u,1),e,n)}function rT(t,e,n){for(var i=-1,u=t.length,a=e.length,s={};++i<u;){var o=i<a?e[i]:r;n(s,t[i],o)}return s}function rA(t){return uG(t)?t:[]}function rI(t){return"function"==typeof t?t:aG}function rj(t,e){return uU(t)?t:iw(t,e)?[t]:iU(ae(t))}function rP(t,e,n){var i=t.length;return n=r===n?i:n,!e&&n>=i?t:rp(t,e,n)}var rC=t9||function(t){return t4.clearTimeout(t)};function rO(t,e){if(e)return t.slice();var n=t.length,r=tz?tz(n):new t.constructor(n);return t.copy(r),r}function r$(t){var e=new t.constructor(t.byteLength);return new tW(e).set(new tW(t)),e}function rD(t,e){var n=e?r$(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function rU(t,e){if(t!==e){var n=r!==t,i=null===t,u=t==t,a=u1(t),s=r!==e,o=null===e,l=e==e,c=u1(e);if(!o&&!c&&!a&&t>e||a&&s&&l&&!o&&!c||i&&s&&l||!n&&l||!u)return 1;if(!i&&!a&&!c&&t<e||c&&n&&u&&!i&&!a||o&&n&&u||!s&&u||!l)return -1}return 0}function rk(t,e,n,r){for(var i=-1,u=t.length,a=n.length,s=-1,o=e.length,l=e2(u-a,0),c=tm(o+l),f=!r;++s<o;)c[s]=e[s];for(;++i<a;)(f||i<u)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function rL(t,e,n,r){for(var i=-1,u=t.length,a=-1,s=n.length,o=-1,l=e.length,c=e2(u-s,0),f=tm(c+l),h=!r;++i<c;)f[i]=t[i];for(var d=i;++o<l;)f[d+o]=e[o];for(;++a<s;)(h||i<u)&&(f[d+n[a]]=t[i++]);return f}function rG(t,e){var n=-1,r=t.length;for(e||(e=tm(r));++n<r;)e[n]=t[n];return e}function rW(t,e,n,i){var u=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=i?i(n[o],t[o],o,n,t):r;r===l&&(l=t[o]),u?nj(n,o,l):nM(n,o,l)}return n}function rz(t,e){return function(n,r){var i=uU(n)?eo:nA,u=e?e():{};return i(n,t,ic(r,2),u)}}function rH(t){return rf(function(e,n){var i=-1,u=n.length,a=u>1?n[u-1]:r,s=u>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(u--,a):r,s&&iE(n[0],n[1],s)&&(a=u<3?r:a,u=1),e=tw(e);++i<u;){var o=n[i];o&&t(e,o,i,a)}return e})}function rB(t,e){return function(n,r){if(null==n)return n;if(!uL(n))return t(n,r);for(var i=n.length,u=e?i:-1,a=tw(n);(e?u--:++u<i)&&!1!==r(a[u],u,a););return n}}function rF(t){return function(e,n,r){for(var i=-1,u=tw(e),a=r(e),s=a.length;s--;){var o=a[t?s:++i];if(!1===n(u[o],o,u))break}return e}}function rq(t){return function(e){var n=eG(e=ae(e))?eq(e):r,i=n?n[0]:e.charAt(0),u=n?rP(n,1).join(""):e.slice(1);return i[t]()+u}}function rK(t){return function(e){return e_(aO(aR(e).replace(tB,"")),t,"")}}function rV(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=np(t.prototype),r=t.apply(n,e);return uK(r)?r:n}}function rQ(t){return function(e,n,i){var u=tw(e);if(!uL(e)){var a=ic(n,3);e=ag(e),n=function(t){return a(u[t],t,u)}}var s=t(e,n,i);return s>-1?u[a?e[s]:s]:r}}function rJ(t){return ii(function(e){var n=e.length,u=n,a=nv.prototype.thru;for(t&&e.reverse();u--;){var s=e[u];if("function"!=typeof s)throw new tR(i);if(a&&!o&&"wrapper"==io(s))var o=new nv([],!0)}for(u=o?u:n;++u<n;){var l=io(s=e[u]),c="wrapper"==l?is(s):r;o=c&&iS(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?o[io(c[0])].apply(o,c[3]):1==s.length&&iS(s)?o[l]():o.thru(s)}return function(){var t=arguments,r=t[0];if(o&&1==t.length&&uU(r))return o.plant(r).value();for(var i=0,u=n?e[i].apply(this,t):r;++i<n;)u=e[i].call(this,u);return u}})}function rX(t,e,n,i,u,a,s,o,l,c){var f=128&e,h=1&e,d=2&e,g=24&e,p=512&e,_=d?r:rV(t);function v(){for(var m=arguments.length,y=tm(m),b=m;b--;)y[b]=arguments[b];if(g)var x=il(v),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(y,x);if(i&&(y=rk(y,i,u,g)),a&&(y=rL(y,a,s,g)),m-=E,g&&m<c){var w=eH(y,x);return r6(t,e,rX,v.placeholder,n,y,w,o,l,c-m)}var S=h?n:this,N=d?S[t]:t;return m=y.length,o?y=function(t,e){for(var n=t.length,i=e3(e.length,n),u=rG(t);i--;){var a=e[i];t[i]=ix(a,n)?u[a]:r}return t}(y,o):p&&m>1&&y.reverse(),f&&l<m&&(y.length=l),this&&this!==t4&&this instanceof v&&(N=_||rV(N)),N.apply(S,y)}return v}function rZ(t,e){return function(n,r){var i,u;return i=e(r),u={},nq(n,function(e,n,r){t(u,i(e),n,r)}),u}}function rY(t,e){return function(n,i){var u;if(r===n&&r===i)return e;if(r!==n&&(u=n),r!==i){if(r===u)return i;"string"==typeof n||"string"==typeof i?(n=rx(n),i=rx(i)):(n=rb(n),i=rb(i)),u=t(n,i)}return u}}function r0(t){return ii(function(e){return e=eg(e,eP(ic())),rf(function(n){var r=this;return t(e,function(t){return es(t,r,n)})})})}function r1(t,e){var n=(e=r===e?" ":rx(e)).length;if(n<2)return n?rc(e,t):e;var i=rc(e,eM(t/eF(e)));return eG(e)?rP(eq(i),0,t).join(""):i.slice(0,t)}function r2(t){return function(e,n,i){i&&"number"!=typeof i&&iE(e,n,i)&&(n=i=r),e=u8(e),r===n?(n=e,e=0):n=u8(n),i=r===i?e<n?1:-1:u8(i);for(var u=e,a=n,s=i,o=-1,l=e2(eM((a-u)/(s||1)),0),c=tm(l);l--;)c[t?l:++o]=u,u+=s;return c}}function r3(t){return function(e,n){return("string"!=typeof e||"string"!=typeof n)&&(e=u9(e),n=u9(n)),t(e,n)}}function r6(t,e,n,i,u,a,s,o,l,c){var f=8&e,h=f?s:r,d=f?r:s,g=f?a:r,p=f?r:a;e|=f?32:64,4&(e&=~(f?64:32))||(e&=-4);var _=[t,e,u,g,h,p,d,o,l,c],v=n.apply(r,_);return iS(t)&&ij(v,_),v.placeholder=i,iO(v,t,e)}function r4(t){var e=tE[t];return function(t,n){if(t=u9(t),(n=null==n?0:e3(u7(n),292))&&eY(t)){var r=(ae(t)+"e").split("e");return+((r=(ae(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(r[1]-n))}return e(t)}}var r8=ne&&1/eB(new ne([,-0]))[1]==s?function(t){return new ne(t)}:aF;function r7(t){return function(e){var n,r,i=iv(e);return i==v?eW(e):i==E?(n=-1,r=Array(e.size),e.forEach(function(t){r[++n]=[t,t]}),r):eg(t(e),function(t){return[t,e[t]]})}}function r5(t,e,n,u,s,o,l,c){var f=2&e;if(!f&&"function"!=typeof t)throw new tR(i);var h=u?u.length:0;if(h||(e&=-97,u=s=r),l=r===l?l:e2(u7(l),0),c=r===c?c:u7(c),h-=s?s.length:0,64&e){var d=u,g=s;u=s=r}var p=f?r:is(t),_=[t,e,n,u,s,d,g,o,l,c];if(p&&function(t,e){var n=t[1],r=e[1],i=n|r,u=i<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(u||s){1&r&&(t[2]=e[2],i|=1&n?0:4);var o=e[3];if(o){var l=t[3];t[3]=l?rk(l,o,e[4]):o,t[4]=l?eH(t[3],a):e[4]}(o=e[5])&&(l=t[5],t[5]=l?rL(l,o,e[6]):o,t[6]=l?eH(t[5],a):e[6]),(o=e[7])&&(t[7]=o),128&r&&(t[8]=null==t[8]?e[8]:e3(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(_,p),t=_[0],e=_[1],n=_[2],u=_[3],s=_[4],(c=_[9]=_[9]===r?f?0:t.length:e2(_[9]-h,0))||!(24&e)||(e&=-25),e&&1!=e)8==e||16==e?T=function(t,e,n){var i=rV(t);function u(){for(var a=arguments.length,s=tm(a),o=a,l=il(u);o--;)s[o]=arguments[o];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:eH(s,l);return(a-=c.length)<n?r6(t,e,rX,u.placeholder,r,s,c,r,r,n-a):es(this&&this!==t4&&this instanceof u?i:t,this,s)}return u}(t,e,c):32!=e&&33!=e||s.length?T=rX.apply(r,_):(v=t,m=e,y=n,b=u,x=1&m,E=rV(v),T=function t(){for(var e=-1,n=arguments.length,r=-1,i=b.length,u=tm(i+n),a=this&&this!==t4&&this instanceof t?E:v;++r<i;)u[r]=b[r];for(;n--;)u[r++]=arguments[++e];return es(a,x?y:this,u)});else var v,m,y,b,x,E,w,S,N,R,M,T=(w=t,S=e,N=n,R=1&S,M=rV(w),function t(){return(this&&this!==t4&&this instanceof t?M:w).apply(R?N:this,arguments)});return iO((p?rd:ij)(T,_),t,e)}function r9(t,e,n,i){return r===t||uC(t,tA[n])&&!tP.call(i,n)?e:t}function it(t,e,n,i,u,a){return uK(t)&&uK(e)&&(a.set(e,t),rr(t,e,r,it,a),a.delete(e)),t}function ie(t){return uX(t)?r:t}function ir(t,e,n,i,u,a){var s=1&n,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(t),f=a.get(e);if(c&&f)return c==e&&f==t;var h=-1,d=!0,g=2&n?new nE:r;for(a.set(t,e),a.set(e,t);++h<o;){var p=t[h],_=e[h];if(i)var v=s?i(_,p,h,e,t,a):i(p,_,h,t,e,a);if(r!==v){if(v)continue;d=!1;break}if(g){if(!em(e,function(t,e){if(!eO(g,e)&&(p===t||u(p,t,n,i,a)))return g.push(e)})){d=!1;break}}else if(!(p===_||u(p,_,n,i,a))){d=!1;break}}return a.delete(t),a.delete(e),d}function ii(t){return iC(iT(t,r,iq),t+"")}function iu(t){return nJ(t,ag,ip)}function ia(t){return nJ(t,ap,i_)}var is=ni?function(t){return ni.get(t)}:aF;function io(t){for(var e=t.name+"",n=nu[e],r=tP.call(nu,e)?n.length:0;r--;){var i=n[r],u=i.func;if(null==u||u==t)return i.name}return e}function il(t){return(tP.call(ng,"placeholder")?ng:t).placeholder}function ic(){var t=ng.iteratee||aW;return t=t===aW?n7:t,arguments.length?t(arguments[0],arguments[1]):t}function ih(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function id(t){for(var e=ag(t),n=e.length;n--;){var r,i=e[n],u=t[i];e[n]=[i,u,(r=u)==r&&!uK(r)]}return e}function ig(t,e){var n=null==t?r:t[e];return n8(n)?n:r}var ip=eX?function(t){return null==t?[]:ef(eX(t=tw(t)),function(e){return tV.call(t,e)})}:aZ,i_=eX?function(t){for(var e=[];t;)ep(e,ip(t)),t=tH(t);return e}:aZ,iv=nX;function im(t,e,n){e=rj(e,t);for(var r=-1,i=e.length,u=!1;++r<i;){var a=ik(e[r]);if(!(u=null!=t&&n(t,a)))break;t=t[a]}return u||++r!=i?u:!!(i=null==t?0:t.length)&&uq(i)&&ix(a,i)&&(uU(t)||uD(t))}function iy(t){return"function"!=typeof t.constructor||iR(t)?{}:np(tH(t))}function ib(t){return uU(t)||uD(t)||!!(t3&&t&&t[t3])}function ix(t,e){var n=typeof t;return!!(e=null==e?0x1fffffffffffff:e)&&("number"==n||"symbol"!=n&&th.test(t))&&t>-1&&t%1==0&&t<e}function iE(t,e,n){if(!uK(n))return!1;var r=typeof e;return("number"==r?!!(uL(n)&&ix(e,n.length)):"string"==r&&e in n)&&uC(n[e],t)}function iw(t,e){if(uU(t))return!1;var n=typeof t;return!!("number"==n||"symbol"==n||"boolean"==n||null==t||u1(t))||V.test(t)||!K.test(t)||null!=e&&t in tw(e)}function iS(t){var e=io(t),n=ng[e];if("function"!=typeof n||!(e in nm.prototype))return!1;if(t===n)return!0;var r=is(n);return!!r&&t===r[0]}(e5&&iv(new e5(new ArrayBuffer(1)))!=M||e9&&iv(new e9)!=v||nt&&iv(nt.resolve())!=b||ne&&iv(new ne)!=E||nn&&iv(new nn)!=N)&&(iv=function(t){var e=nX(t),n=e==y?t.constructor:r,i=n?iL(n):"";if(i)switch(i){case na:return M;case ns:return v;case no:return b;case nl:return E;case nc:return N}return e});var iN=tI?uB:aY;function iR(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||tA)}function iM(t,e){return function(n){return null!=n&&n[t]===e&&(r!==e||t in tw(n))}}function iT(t,e,n){return e=e2(r===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,u=e2(r.length-e,0),a=tm(u);++i<u;)a[i]=r[e+i];i=-1;for(var s=tm(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),es(t,this,s)}}function iA(t,e){return e.length<2?t:nQ(t,rp(e,0,-1))}function iI(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ij=i$(rd),iP=ey||function(t,e){return t4.setTimeout(t,e)},iC=i$(rg);function iO(t,e,n){var r,i,u,a=e+"";return iC(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(tt,"{\n/* [wrapped with "+e+"] */\n")}(a,(r=(u=a.match(te))?u[1].split(tn):[],i=n,el(l,function(t){var e="_."+t[0];i&t[1]&&!eh(r,e)&&r.push(e)}),r.sort())))}function i$(t){var e=0,n=0;return function(){var i=e6(),u=16-(i-n);if(n=i,u>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function iD(t,e){var n=-1,i=t.length,u=i-1;for(e=r===e?i:e;++n<e;){var a=rl(n,u),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var iU=(t_=(Y=uM(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Q,function(t,n,r,i){e.push(r?i.replace(tu,"$1"):n||t)}),e},function(t){return 500===t_.size&&t_.clear(),t})).cache,Y);function ik(t){if("string"==typeof t||u1(t))return t;var e=t+"";return"0"==e&&1/t==-s?"-0":e}function iL(t){if(null!=t){try{return tj.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function iG(t){if(t instanceof nm)return t.clone();var e=new nv(t.__wrapped__,t.__chain__);return e.__actions__=rG(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var iW=rf(function(t,e){return uG(t)?nU(t,nH(e,1,uG,!0)):[]}),iz=rf(function(t,e){var n=iX(e);return uG(n)&&(n=r),uG(t)?nU(t,nH(e,1,uG,!0),ic(n,2)):[]}),iH=rf(function(t,e){var n=iX(e);return uG(n)&&(n=r),uG(t)?nU(t,nH(e,1,uG,!0),r,n):[]});function iB(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:u7(n);return i<0&&(i=e2(r+i,0)),ex(t,ic(e,3),i)}function iF(t,e,n){var i=null==t?0:t.length;if(!i)return -1;var u=i-1;return r!==n&&(u=u7(n),u=n<0?e2(i+u,0):e3(u,i-1)),ex(t,ic(e,3),u,!0)}function iq(t){return(null==t?0:t.length)?nH(t,1):[]}function iK(t){return t&&t.length?t[0]:r}var iV=rf(function(t){var e=eg(t,rA);return e.length&&e[0]===t[0]?n1(e):[]}),iQ=rf(function(t){var e=iX(t),n=eg(t,rA);return e===iX(n)?e=r:n.pop(),n.length&&n[0]===t[0]?n1(n,ic(e,2)):[]}),iJ=rf(function(t){var e=iX(t),n=eg(t,rA);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?n1(n,r,e):[]});function iX(t){var e=null==t?0:t.length;return e?t[e-1]:r}var iZ=rf(iY);function iY(t,e){return t&&t.length&&e&&e.length?rs(t,e):t}var i0=ii(function(t,e){var n=null==t?0:t.length,r=nP(t,e);return ro(t,eg(e,function(t){return ix(t,n)?+t:t}).sort(rU)),r});function i1(t){return null==t?t:e7.call(t)}var i2=rf(function(t){return rE(nH(t,1,uG,!0))}),i3=rf(function(t){var e=iX(t);return uG(e)&&(e=r),rE(nH(t,1,uG,!0),ic(e,2))}),i6=rf(function(t){var e=iX(t);return e="function"==typeof e?e:r,rE(nH(t,1,uG,!0),r,e)});function i4(t){if(!(t&&t.length))return[];var e=0;return t=ef(t,function(t){if(uG(t))return e=e2(t.length,e),!0}),eI(e,function(e){return eg(t,eR(e))})}function i8(t,e){if(!(t&&t.length))return[];var n=i4(t);return null==e?n:eg(n,function(t){return es(e,r,t)})}var i7=rf(function(t,e){return uG(t)?nU(t,e):[]}),i5=rf(function(t){return rM(ef(t,uG))}),i9=rf(function(t){var e=iX(t);return uG(e)&&(e=r),rM(ef(t,uG),ic(e,2))}),ut=rf(function(t){var e=iX(t);return e="function"==typeof e?e:r,rM(ef(t,uG),r,e)}),ue=rf(i4),un=rf(function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,i8(t,n)});function ur(t){var e=ng(t);return e.__chain__=!0,e}function ui(t,e){return e(t)}var uu=ii(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,u=function(e){return nP(e,t)};return!(e>1)&&!this.__actions__.length&&i instanceof nm&&ix(n)?((i=i.slice(n,+n+ +!!e)).__actions__.push({func:ui,args:[u],thisArg:r}),new nv(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(u)}),ua=rz(function(t,e,n){tP.call(t,n)?++t[n]:nj(t,n,1)}),us=rQ(iB),uo=rQ(iF);function ul(t,e){return(uU(t)?el:nk)(t,ic(e,3))}function uc(t,e){return(uU(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:nL)(t,ic(e,3))}var uf=rz(function(t,e,n){tP.call(t,n)?t[n].push(e):nj(t,n,[e])}),uh=rf(function(t,e,n){var r=-1,i="function"==typeof e,u=uL(t)?tm(t.length):[];return nk(t,function(t){u[++r]=i?es(e,t,n):n2(t,e,n)}),u}),ud=rz(function(t,e,n){nj(t,n,e)});function ug(t,e){return(uU(t)?eg:rt)(t,ic(e,3))}var up=rz(function(t,e,n){t[+!n].push(e)},function(){return[[],[]]}),u_=rf(function(t,e){if(null==t)return[];var n=e.length;return n>1&&iE(t,e[0],e[1])?e=[]:n>2&&iE(e[0],e[1],e[2])&&(e=[e[0]]),ru(t,nH(e,1),[])}),uv=et||function(){return t4.Date.now()};function um(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,r5(t,128,r,r,r,r,e)}function uy(t,e){var n;if("function"!=typeof e)throw new tR(i);return t=u7(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var ub=rf(function(t,e,n){var r=1;if(n.length){var i=eH(n,il(ub));r|=32}return r5(t,r,e,n,i)}),ux=rf(function(t,e,n){var r=3;if(n.length){var i=eH(n,il(ux));r|=32}return r5(e,r,t,n,i)});function uE(t,e,n){e=n?r:e;var i=r5(t,8,r,r,r,r,r,e);return i.placeholder=uE.placeholder,i}function uw(t,e,n){e=n?r:e;var i=r5(t,16,r,r,r,r,r,e);return i.placeholder=uw.placeholder,i}function uS(t,e,n){var u,a,s,o,l,c,f=0,h=!1,d=!1,g=!0;if("function"!=typeof t)throw new tR(i);function p(e){var n=u,i=a;return u=a=r,f=e,o=t.apply(i,n)}function _(t){var n=t-c,i=t-f;return r===c||n>=e||n<0||d&&i>=s}function v(){var t,n,r,i=uv();if(_(i))return m(i);l=iP(v,(t=i-c,n=i-f,r=e-t,d?e3(r,s-n):r))}function m(t){return(l=r,g&&u)?p(t):(u=a=r,o)}function y(){var t,n=uv(),i=_(n);if(u=arguments,a=this,c=n,i){if(r===l)return f=t=c,l=iP(v,e),h?p(t):o;if(d)return rC(l),l=iP(v,e),p(c)}return r===l&&(l=iP(v,e)),o}return e=u9(e)||0,uK(n)&&(h=!!n.leading,s=(d="maxWait"in n)?e2(u9(n.maxWait)||0,e):s,g="trailing"in n?!!n.trailing:g),y.cancel=function(){r!==l&&rC(l),f=0,u=c=a=l=r},y.flush=function(){return r===l?o:m(uv())},y}var uN=rf(function(t,e){return nD(t,1,e)}),uR=rf(function(t,e,n){return nD(t,u9(e)||0,n)});function uM(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new tR(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],u=n.cache;if(u.has(i))return u.get(i);var a=t.apply(this,r);return n.cache=u.set(i,a)||u,a};return n.cache=new(uM.Cache||nx),n}function uT(t){if("function"!=typeof t)throw new tR(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}uM.Cache=nx;var uA=rf(function(t,e){var n=(e=1==e.length&&uU(e[0])?eg(e[0],eP(ic())):eg(nH(e,1),eP(ic()))).length;return rf(function(r){for(var i=-1,u=e3(r.length,n);++i<u;)r[i]=e[i].call(this,r[i]);return es(t,this,r)})}),uI=rf(function(t,e){var n=eH(e,il(uI));return r5(t,32,r,e,n)}),uj=rf(function(t,e){var n=eH(e,il(uj));return r5(t,64,r,e,n)}),uP=ii(function(t,e){return r5(t,256,r,r,r,e)});function uC(t,e){return t===e||t!=t&&e!=e}var uO=r3(nZ),u$=r3(function(t,e){return t>=e}),uD=n3(function(){return arguments}())?n3:function(t){return uV(t)&&tP.call(t,"callee")&&!tV.call(t,"callee")},uU=tm.isArray,uk=ee?eP(ee):function(t){return uV(t)&&nX(t)==R};function uL(t){return null!=t&&uq(t.length)&&!uB(t)}function uG(t){return uV(t)&&uL(t)}var uW=eZ||aY,uz=en?eP(en):function(t){return uV(t)&&nX(t)==d};function uH(t){if(!uV(t))return!1;var e=nX(t);return e==g||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!uX(t)}function uB(t){if(!uK(t))return!1;var e=nX(t);return e==p||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function uF(t){return"number"==typeof t&&t==u7(t)}function uq(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff}function uK(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function uV(t){return null!=t&&"object"==typeof t}var uQ=er?eP(er):function(t){return uV(t)&&iv(t)==v};function uJ(t){return"number"==typeof t||uV(t)&&nX(t)==m}function uX(t){if(!uV(t)||nX(t)!=y)return!1;var e=tH(t);if(null===e)return!0;var n=tP.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&tj.call(n)==tD}var uZ=ei?eP(ei):function(t){return uV(t)&&nX(t)==x},uY=eu?eP(eu):function(t){return uV(t)&&iv(t)==E};function u0(t){return"string"==typeof t||!uU(t)&&uV(t)&&nX(t)==w}function u1(t){return"symbol"==typeof t||uV(t)&&nX(t)==S}var u2=ea?eP(ea):function(t){return uV(t)&&uq(t.length)&&!!tZ[nX(t)]},u3=r3(n9),u6=r3(function(t,e){return t<=e});function u4(t){if(!t)return[];if(uL(t))return u0(t)?eq(t):rG(t);if(t6&&t[t6]){for(var e,n=t[t6](),r=[];!(e=n.next()).done;)r.push(e.value);return r}var i=iv(t);return(i==v?eW:i==E?eB:aw)(t)}function u8(t){return t?(t=u9(t))===s||t===-s?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function u7(t){var e=u8(t),n=e%1;return e==e?n?e-n:e:0}function u5(t){return t?nC(u7(t),0,0xffffffff):0}function u9(t){if("number"==typeof t)return t;if(u1(t))return o;if(uK(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=uK(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ej(t);var n=tl.test(t);return n||tf.test(t)?t2(t.slice(2),n?2:8):to.test(t)?o:+t}function at(t){return rW(t,ap(t))}function ae(t){return null==t?"":rx(t)}var an=rH(function(t,e){if(iR(e)||uL(e))return void rW(e,ag(e),t);for(var n in e)tP.call(e,n)&&nM(t,n,e[n])}),ar=rH(function(t,e){rW(e,ap(e),t)}),ai=rH(function(t,e,n,r){rW(e,ap(e),t,r)}),au=rH(function(t,e,n,r){rW(e,ag(e),t,r)}),aa=ii(nP),as=rf(function(t,e){t=tw(t);var n=-1,i=e.length,u=i>2?e[2]:r;for(u&&iE(e[0],e[1],u)&&(i=1);++n<i;)for(var a=e[n],s=ap(a),o=-1,l=s.length;++o<l;){var c=s[o],f=t[c];(r===f||uC(f,tA[c])&&!tP.call(t,c))&&(t[c]=a[c])}return t}),ao=rf(function(t){return t.push(r,it),es(av,r,t)});function al(t,e,n){var i=null==t?r:nQ(t,e);return r===i?n:i}function ac(t,e){return null!=t&&im(t,e,n0)}var af=rZ(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=t$.call(e)),t[e]=n},aU(aG)),ah=rZ(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=t$.call(e)),tP.call(t,e)?t[e].push(n):t[e]=[n]},ic),ad=rf(n2);function ag(t){return uL(t)?nS(t):n5(t)}function ap(t){return uL(t)?nS(t,!0):function(t){if(!uK(t)){var e=t,n=[];if(null!=e)for(var r in tw(e))n.push(r);return n}var i=iR(t),u=[];for(var a in t)"constructor"==a&&(i||!tP.call(t,a))||u.push(a);return u}(t)}var a_=rH(function(t,e,n){rr(t,e,n)}),av=rH(function(t,e,n,r){rr(t,e,n,r)}),am=ii(function(t,e){var n={};if(null==t)return n;var r=!1;e=eg(e,function(e){return e=rj(e,t),r||(r=e.length>1),e}),rW(t,ia(t),n),r&&(n=nO(n,7,ie));for(var i=e.length;i--;)rw(n,e[i]);return n}),ay=ii(function(t,e){return null==t?{}:ra(t,e,function(e,n){return ac(t,n)})});function ab(t,e){if(null==t)return{};var n=eg(ia(t),function(t){return[t]});return e=ic(e),ra(t,n,function(t,n){return e(t,n[0])})}var ax=r7(ag),aE=r7(ap);function aw(t){return null==t?[]:eC(t,ag(t))}var aS=rK(function(t,e,n){return e=e.toLowerCase(),t+(n?aN(e):e)});function aN(t){return aC(ae(t).toLowerCase())}function aR(t){return(t=ae(t))&&t.replace(td,eU).replace(tF,"")}var aM=rK(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),aT=rK(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),aA=rq("toLowerCase"),aI=rK(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),aj=rK(function(t,e,n){return t+(n?" ":"")+aC(e)}),aP=rK(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),aC=rq("toUpperCase");function aO(t,e,n){if(t=ae(t),e=n?r:e,r===e){var i;return(i=t,tQ.test(i))?t.match(tK)||[]:t.match(tr)||[]}return t.match(e)||[]}var a$=rf(function(t,e){try{return es(t,r,e)}catch(t){return uH(t)?t:new tb(t)}}),aD=ii(function(t,e){return el(e,function(e){nj(t,e=ik(e),ub(t[e],t))}),t});function aU(t){return function(){return t}}var ak=rJ(),aL=rJ(!0);function aG(t){return t}function aW(t){return n7("function"==typeof t?t:nO(t,1))}var az=rf(function(t,e){return function(n){return n2(n,t,e)}}),aH=rf(function(t,e){return function(n){return n2(t,n,e)}});function aB(t,e,n){var r=ag(e),i=nV(e,r);null!=n||uK(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=nV(e,ag(e)));var u=!(uK(n)&&"chain"in n)||!!n.chain,a=uB(t);return el(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(u||e){var n=t(this.__wrapped__);return(n.__actions__=rG(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,ep([this.value()],arguments))})}),t}function aF(){}var aq=r0(eg),aK=r0(ec),aV=r0(em);function aQ(t){return iw(t)?eR(ik(t)):function(e){return nQ(e,t)}}var aJ=r2(),aX=r2(!0);function aZ(){return[]}function aY(){return!1}var a0=rY(function(t,e){return t+e},0),a1=r4("ceil"),a2=rY(function(t,e){return t/e},1),a3=r4("floor"),a6=rY(function(t,e){return t*e},1),a4=r4("round"),a8=rY(function(t,e){return t-e},0);return ng.after=function(t,e){if("function"!=typeof e)throw new tR(i);return t=u7(t),function(){if(--t<1)return e.apply(this,arguments)}},ng.ary=um,ng.assign=an,ng.assignIn=ar,ng.assignInWith=ai,ng.assignWith=au,ng.at=aa,ng.before=uy,ng.bind=ub,ng.bindAll=aD,ng.bindKey=ux,ng.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return uU(t)?t:[t]},ng.chain=ur,ng.chunk=function(t,e,n){e=(n?iE(t,e,n):r===e)?1:e2(u7(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var u=0,a=0,s=tm(eM(i/e));u<i;)s[a++]=rp(t,u,u+=e);return s},ng.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var u=t[e];u&&(i[r++]=u)}return i},ng.concat=function(){var t=arguments.length;if(!t)return[];for(var e=tm(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return ep(uU(n)?rG(n):[n],nH(e,1))},ng.cond=function(t){var e=null==t?0:t.length,n=ic();return t=e?eg(t,function(t){if("function"!=typeof t[1])throw new tR(i);return[n(t[0]),t[1]]}):[],rf(function(n){for(var r=-1;++r<e;){var i=t[r];if(es(i[0],this,n))return es(i[1],this,n)}})},ng.conforms=function(t){var e,n;return n=ag(e=nO(t,1)),function(t){return n$(t,e,n)}},ng.constant=aU,ng.countBy=ua,ng.create=function(t,e){var n=np(t);return null==e?n:nI(n,e)},ng.curry=uE,ng.curryRight=uw,ng.debounce=uS,ng.defaults=as,ng.defaultsDeep=ao,ng.defer=uN,ng.delay=uR,ng.difference=iW,ng.differenceBy=iz,ng.differenceWith=iH,ng.drop=function(t,e,n){var i=null==t?0:t.length;return i?rp(t,(e=n||r===e?1:u7(e))<0?0:e,i):[]},ng.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?rp(t,0,(e=i-(e=n||r===e?1:u7(e)))<0?0:e):[]},ng.dropRightWhile=function(t,e){return t&&t.length?rN(t,ic(e,3),!0,!0):[]},ng.dropWhile=function(t,e){return t&&t.length?rN(t,ic(e,3),!0):[]},ng.fill=function(t,e,n,i){var u=null==t?0:t.length;if(!u)return[];n&&"number"!=typeof n&&iE(t,e,n)&&(n=0,i=u);var a=n,s=i,o=t.length;for((a=u7(a))<0&&(a=-a>o?0:o+a),(s=r===s||s>o?o:u7(s))<0&&(s+=o),s=a>s?0:u5(s);a<s;)t[a++]=e;return t},ng.filter=function(t,e){return(uU(t)?ef:nz)(t,ic(e,3))},ng.flatMap=function(t,e){return nH(ug(t,e),1)},ng.flatMapDeep=function(t,e){return nH(ug(t,e),s)},ng.flatMapDepth=function(t,e,n){return n=r===n?1:u7(n),nH(ug(t,e),n)},ng.flatten=iq,ng.flattenDeep=function(t){return(null==t?0:t.length)?nH(t,s):[]},ng.flattenDepth=function(t,e){return(null==t?0:t.length)?nH(t,e=r===e?1:u7(e)):[]},ng.flip=function(t){return r5(t,512)},ng.flow=ak,ng.flowRight=aL,ng.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},ng.functions=function(t){return null==t?[]:nV(t,ag(t))},ng.functionsIn=function(t){return null==t?[]:nV(t,ap(t))},ng.groupBy=uf,ng.initial=function(t){return(null==t?0:t.length)?rp(t,0,-1):[]},ng.intersection=iV,ng.intersectionBy=iQ,ng.intersectionWith=iJ,ng.invert=af,ng.invertBy=ah,ng.invokeMap=uh,ng.iteratee=aW,ng.keyBy=ud,ng.keys=ag,ng.keysIn=ap,ng.map=ug,ng.mapKeys=function(t,e){var n={};return e=ic(e,3),nq(t,function(t,r,i){nj(n,e(t,r,i),t)}),n},ng.mapValues=function(t,e){var n={};return e=ic(e,3),nq(t,function(t,r,i){nj(n,r,e(t,r,i))}),n},ng.matches=function(t){return re(nO(t,1))},ng.matchesProperty=function(t,e){return rn(t,nO(e,1))},ng.memoize=uM,ng.merge=a_,ng.mergeWith=av,ng.method=az,ng.methodOf=aH,ng.mixin=aB,ng.negate=uT,ng.nthArg=function(t){return t=u7(t),rf(function(e){return ri(e,t)})},ng.omit=am,ng.omitBy=function(t,e){return ab(t,uT(ic(e)))},ng.once=function(t){return uy(2,t)},ng.orderBy=function(t,e,n,i){return null==t?[]:(uU(e)||(e=null==e?[]:[e]),uU(n=i?r:n)||(n=null==n?[]:[n]),ru(t,e,n))},ng.over=aq,ng.overArgs=uA,ng.overEvery=aK,ng.overSome=aV,ng.partial=uI,ng.partialRight=uj,ng.partition=up,ng.pick=ay,ng.pickBy=ab,ng.property=aQ,ng.propertyOf=function(t){return function(e){return null==t?r:nQ(t,e)}},ng.pull=iZ,ng.pullAll=iY,ng.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?rs(t,e,ic(n,2)):t},ng.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?rs(t,e,r,n):t},ng.pullAt=i0,ng.range=aJ,ng.rangeRight=aX,ng.rearg=uP,ng.reject=function(t,e){return(uU(t)?ef:nz)(t,uT(ic(e,3)))},ng.remove=function(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,i=[],u=t.length;for(e=ic(e,3);++r<u;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return ro(t,i),n},ng.rest=function(t,e){if("function"!=typeof t)throw new tR(i);return rf(t,e=r===e?e:u7(e))},ng.reverse=i1,ng.sampleSize=function(t,e,n){return e=(n?iE(t,e,n):r===e)?1:u7(e),(uU(t)?function(t,e){return iD(rG(t),nC(e,0,t.length))}:function(t,e){var n=aw(t);return iD(n,nC(e,0,n.length))})(t,e)},ng.set=function(t,e,n){return null==t?t:rh(t,e,n)},ng.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:rh(t,e,n,i)},ng.shuffle=function(t){return(uU(t)?function(t){return iD(rG(t))}:function(t){return iD(aw(t))})(t)},ng.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&iE(t,e,n)?(e=0,n=i):(e=null==e?0:u7(e),n=r===n?i:u7(n)),rp(t,e,n)):[]},ng.sortBy=u_,ng.sortedUniq=function(t){return t&&t.length?ry(t):[]},ng.sortedUniqBy=function(t,e){return t&&t.length?ry(t,ic(e,2)):[]},ng.split=function(t,e,n){return(n&&"number"!=typeof n&&iE(t,e,n)&&(e=n=r),n=r===n?0xffffffff:n>>>0)?(t=ae(t))&&("string"==typeof e||null!=e&&!uZ(e))&&!(e=rx(e))&&eG(t)?rP(eq(t),0,n):t.split(e,n):[]},ng.spread=function(t,e){if("function"!=typeof t)throw new tR(i);return e=null==e?0:e2(u7(e),0),rf(function(n){var r=n[e],i=rP(n,0,e);return r&&ep(i,r),es(t,this,i)})},ng.tail=function(t){var e=null==t?0:t.length;return e?rp(t,1,e):[]},ng.take=function(t,e,n){return t&&t.length?rp(t,0,(e=n||r===e?1:u7(e))<0?0:e):[]},ng.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?rp(t,(e=i-(e=n||r===e?1:u7(e)))<0?0:e,i):[]},ng.takeRightWhile=function(t,e){return t&&t.length?rN(t,ic(e,3),!1,!0):[]},ng.takeWhile=function(t,e){return t&&t.length?rN(t,ic(e,3)):[]},ng.tap=function(t,e){return e(t),t},ng.throttle=function(t,e,n){var r=!0,u=!0;if("function"!=typeof t)throw new tR(i);return uK(n)&&(r="leading"in n?!!n.leading:r,u="trailing"in n?!!n.trailing:u),uS(t,e,{leading:r,maxWait:e,trailing:u})},ng.thru=ui,ng.toArray=u4,ng.toPairs=ax,ng.toPairsIn=aE,ng.toPath=function(t){return uU(t)?eg(t,ik):u1(t)?[t]:rG(iU(ae(t)))},ng.toPlainObject=at,ng.transform=function(t,e,n){var r=uU(t),i=r||uW(t)||u2(t);if(e=ic(e,4),null==n){var u=t&&t.constructor;n=i?r?new u:[]:uK(t)&&uB(u)?np(tH(t)):{}}return(i?el:nq)(t,function(t,r,i){return e(n,t,r,i)}),n},ng.unary=function(t){return um(t,1)},ng.union=i2,ng.unionBy=i3,ng.unionWith=i6,ng.uniq=function(t){return t&&t.length?rE(t):[]},ng.uniqBy=function(t,e){return t&&t.length?rE(t,ic(e,2)):[]},ng.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?rE(t,r,e):[]},ng.unset=function(t,e){return null==t||rw(t,e)},ng.unzip=i4,ng.unzipWith=i8,ng.update=function(t,e,n){return null==t?t:rS(t,e,rI(n))},ng.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:rS(t,e,rI(n),i)},ng.values=aw,ng.valuesIn=function(t){return null==t?[]:eC(t,ap(t))},ng.without=i7,ng.words=aO,ng.wrap=function(t,e){return uI(rI(e),t)},ng.xor=i5,ng.xorBy=i9,ng.xorWith=ut,ng.zip=ue,ng.zipObject=function(t,e){return rT(t||[],e||[],nM)},ng.zipObjectDeep=function(t,e){return rT(t||[],e||[],rh)},ng.zipWith=un,ng.entries=ax,ng.entriesIn=aE,ng.extend=ar,ng.extendWith=ai,aB(ng,ng),ng.add=a0,ng.attempt=a$,ng.camelCase=aS,ng.capitalize=aN,ng.ceil=a1,ng.clamp=function(t,e,n){return r===n&&(n=e,e=r),r!==n&&(n=(n=u9(n))==n?n:0),r!==e&&(e=(e=u9(e))==e?e:0),nC(u9(t),e,n)},ng.clone=function(t){return nO(t,4)},ng.cloneDeep=function(t){return nO(t,5)},ng.cloneDeepWith=function(t,e){return nO(t,5,e="function"==typeof e?e:r)},ng.cloneWith=function(t,e){return nO(t,4,e="function"==typeof e?e:r)},ng.conformsTo=function(t,e){return null==e||n$(t,e,ag(e))},ng.deburr=aR,ng.defaultTo=function(t,e){return null==t||t!=t?e:t},ng.divide=a2,ng.endsWith=function(t,e,n){t=ae(t),e=rx(e);var i=t.length,u=n=r===n?i:nC(u7(n),0,i);return(n-=e.length)>=0&&t.slice(n,u)==e},ng.eq=uC,ng.escape=function(t){return(t=ae(t))&&H.test(t)?t.replace(W,ek):t},ng.escapeRegExp=function(t){return(t=ae(t))&&X.test(t)?t.replace(J,"\\$&"):t},ng.every=function(t,e,n){var i=uU(t)?ec:nG;return n&&iE(t,e,n)&&(e=r),i(t,ic(e,3))},ng.find=us,ng.findIndex=iB,ng.findKey=function(t,e){return eb(t,ic(e,3),nq)},ng.findLast=uo,ng.findLastIndex=iF,ng.findLastKey=function(t,e){return eb(t,ic(e,3),nK)},ng.floor=a3,ng.forEach=ul,ng.forEachRight=uc,ng.forIn=function(t,e){return null==t?t:nB(t,ic(e,3),ap)},ng.forInRight=function(t,e){return null==t?t:nF(t,ic(e,3),ap)},ng.forOwn=function(t,e){return t&&nq(t,ic(e,3))},ng.forOwnRight=function(t,e){return t&&nK(t,ic(e,3))},ng.get=al,ng.gt=uO,ng.gte=u$,ng.has=function(t,e){return null!=t&&im(t,e,nY)},ng.hasIn=ac,ng.head=iK,ng.identity=aG,ng.includes=function(t,e,n,r){t=uL(t)?t:aw(t),n=n&&!r?u7(n):0;var i=t.length;return n<0&&(n=e2(i+n,0)),u0(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&eE(t,e,n)>-1},ng.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:u7(n);return i<0&&(i=e2(r+i,0)),eE(t,e,i)},ng.inRange=function(t,e,n){var i,u,a;return e=u8(e),r===n?(n=e,e=0):n=u8(n),(i=t=u9(t))>=e3(u=e,a=n)&&i<e2(u,a)},ng.invoke=ad,ng.isArguments=uD,ng.isArray=uU,ng.isArrayBuffer=uk,ng.isArrayLike=uL,ng.isArrayLikeObject=uG,ng.isBoolean=function(t){return!0===t||!1===t||uV(t)&&nX(t)==h},ng.isBuffer=uW,ng.isDate=uz,ng.isElement=function(t){return uV(t)&&1===t.nodeType&&!uX(t)},ng.isEmpty=function(t){if(null==t)return!0;if(uL(t)&&(uU(t)||"string"==typeof t||"function"==typeof t.splice||uW(t)||u2(t)||uD(t)))return!t.length;var e=iv(t);if(e==v||e==E)return!t.size;if(iR(t))return!n5(t).length;for(var n in t)if(tP.call(t,n))return!1;return!0},ng.isEqual=function(t,e){return n6(t,e)},ng.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return r===i?n6(t,e,r,n):!!i},ng.isError=uH,ng.isFinite=function(t){return"number"==typeof t&&eY(t)},ng.isFunction=uB,ng.isInteger=uF,ng.isLength=uq,ng.isMap=uQ,ng.isMatch=function(t,e){return t===e||n4(t,e,id(e))},ng.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,n4(t,e,id(e),n)},ng.isNaN=function(t){return uJ(t)&&t!=+t},ng.isNative=function(t){if(iN(t))throw new tb("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return n8(t)},ng.isNil=function(t){return null==t},ng.isNull=function(t){return null===t},ng.isNumber=uJ,ng.isObject=uK,ng.isObjectLike=uV,ng.isPlainObject=uX,ng.isRegExp=uZ,ng.isSafeInteger=function(t){return uF(t)&&t>=-0x1fffffffffffff&&t<=0x1fffffffffffff},ng.isSet=uY,ng.isString=u0,ng.isSymbol=u1,ng.isTypedArray=u2,ng.isUndefined=function(t){return r===t},ng.isWeakMap=function(t){return uV(t)&&iv(t)==N},ng.isWeakSet=function(t){return uV(t)&&"[object WeakSet]"==nX(t)},ng.join=function(t,e){return null==t?"":e0.call(t,e)},ng.kebabCase=aM,ng.last=iX,ng.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return -1;var u=i;return r!==n&&(u=(u=u7(n))<0?e2(i+u,0):e3(u,i-1)),e==e?function(t,e,n){for(var r=n+1;r--&&t[r]!==e;);return r}(t,e,u):ex(t,eS,u,!0)},ng.lowerCase=aT,ng.lowerFirst=aA,ng.lt=u3,ng.lte=u6,ng.max=function(t){return t&&t.length?nW(t,aG,nZ):r},ng.maxBy=function(t,e){return t&&t.length?nW(t,ic(e,2),nZ):r},ng.mean=function(t){return eN(t,aG)},ng.meanBy=function(t,e){return eN(t,ic(e,2))},ng.min=function(t){return t&&t.length?nW(t,aG,n9):r},ng.minBy=function(t,e){return t&&t.length?nW(t,ic(e,2),n9):r},ng.stubArray=aZ,ng.stubFalse=aY,ng.stubObject=function(){return{}},ng.stubString=function(){return""},ng.stubTrue=function(){return!0},ng.multiply=a6,ng.nth=function(t,e){return t&&t.length?ri(t,u7(e)):r},ng.noConflict=function(){return t4._===this&&(t4._=tU),this},ng.noop=aF,ng.now=uv,ng.pad=function(t,e,n){t=ae(t);var r=(e=u7(e))?eF(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return r1(eJ(i),n)+t+r1(eM(i),n)},ng.padEnd=function(t,e,n){t=ae(t);var r=(e=u7(e))?eF(t):0;return e&&r<e?t+r1(e-r,n):t},ng.padStart=function(t,e,n){t=ae(t);var r=(e=u7(e))?eF(t):0;return e&&r<e?r1(e-r,n)+t:t},ng.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e*=1),e4(ae(t).replace(Z,""),e||0)},ng.random=function(t,e,n){if(n&&"boolean"!=typeof n&&iE(t,e,n)&&(e=n=r),r===n&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),r===t&&r===e?(t=0,e=1):(t=u8(t),r===e?(e=t,t=0):e=u8(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var u=e8();return e3(t+u*(e-t+t1("1e-"+((u+"").length-1))),e)}return rl(t,e)},ng.reduce=function(t,e,n){var r=uU(t)?e_:eT,i=arguments.length<3;return r(t,ic(e,4),n,i,nk)},ng.reduceRight=function(t,e,n){var r=uU(t)?ev:eT,i=arguments.length<3;return r(t,ic(e,4),n,i,nL)},ng.repeat=function(t,e,n){return e=(n?iE(t,e,n):r===e)?1:u7(e),rc(ae(t),e)},ng.replace=function(){var t=arguments,e=ae(t[0]);return t.length<3?e:e.replace(t[1],t[2])},ng.result=function(t,e,n){e=rj(e,t);var i=-1,u=e.length;for(u||(u=1,t=r);++i<u;){var a=null==t?r:t[ik(e[i])];r===a&&(i=u,a=n),t=uB(a)?a.call(t):a}return t},ng.round=a4,ng.runInContext=t,ng.sample=function(t){return(uU(t)?nN:function(t){return nN(aw(t))})(t)},ng.size=function(t){if(null==t)return 0;if(uL(t))return u0(t)?eF(t):t.length;var e=iv(t);return e==v||e==E?t.size:n5(t).length},ng.snakeCase=aI,ng.some=function(t,e,n){var i=uU(t)?em:r_;return n&&iE(t,e,n)&&(e=r),i(t,ic(e,3))},ng.sortedIndex=function(t,e){return rv(t,e)},ng.sortedIndexBy=function(t,e,n){return rm(t,e,ic(n,2))},ng.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=rv(t,e);if(r<n&&uC(t[r],e))return r}return -1},ng.sortedLastIndex=function(t,e){return rv(t,e,!0)},ng.sortedLastIndexBy=function(t,e,n){return rm(t,e,ic(n,2),!0)},ng.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=rv(t,e,!0)-1;if(uC(t[n],e))return n}return -1},ng.startCase=aj,ng.startsWith=function(t,e,n){return t=ae(t),n=null==n?0:nC(u7(n),0,t.length),e=rx(e),t.slice(n,n+e.length)==e},ng.subtract=a8,ng.sum=function(t){return t&&t.length?eA(t,aG):0},ng.sumBy=function(t,e){return t&&t.length?eA(t,ic(e,2)):0},ng.template=function(t,e,n){var i=ng.templateSettings;n&&iE(t,e,n)&&(e=r),t=ae(t),e=ai({},e,i,r9);var u,a,s=ai({},e.imports,i.imports,r9),o=ag(s),l=eC(s,o),c=0,f=e.interpolate||tg,h="__p += '",d=tS((e.escape||tg).source+"|"+f.source+"|"+(f===q?ta:tg).source+"|"+(e.evaluate||tg).source+"|$","g"),g="//# sourceURL="+(tP.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tX+"]")+"\n";t.replace(d,function(e,n,r,i,s,o){return r||(r=i),h+=t.slice(c,o).replace(tp,eL),n&&(u=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=o+e.length,e}),h+="';\n";var p=tP.call(e,"variable")&&e.variable;if(p){if(ti.test(p))throw new tb("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(U,""):h).replace(k,"$1").replace(L,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=a$(function(){return tx(o,g+"return "+h).apply(r,l)});if(_.source=h,uH(_))throw _;return _},ng.times=function(t,e){if((t=u7(t))<1||t>0x1fffffffffffff)return[];var n=0xffffffff,r=e3(t,0xffffffff);e=ic(e),t-=0xffffffff;for(var i=eI(r,e);++n<t;)e(n);return i},ng.toFinite=u8,ng.toInteger=u7,ng.toLength=u5,ng.toLower=function(t){return ae(t).toLowerCase()},ng.toNumber=u9,ng.toSafeInteger=function(t){return t?nC(u7(t),-0x1fffffffffffff,0x1fffffffffffff):0===t?t:0},ng.toString=ae,ng.toUpper=function(t){return ae(t).toUpperCase()},ng.trim=function(t,e,n){if((t=ae(t))&&(n||r===e))return ej(t);if(!t||!(e=rx(e)))return t;var i=eq(t),u=eq(e),a=e$(i,u),s=eD(i,u)+1;return rP(i,a,s).join("")},ng.trimEnd=function(t,e,n){if((t=ae(t))&&(n||r===e))return t.slice(0,eK(t)+1);if(!t||!(e=rx(e)))return t;var i=eq(t),u=eD(i,eq(e))+1;return rP(i,0,u).join("")},ng.trimStart=function(t,e,n){if((t=ae(t))&&(n||r===e))return t.replace(Z,"");if(!t||!(e=rx(e)))return t;var i=eq(t),u=e$(i,eq(e));return rP(i,u).join("")},ng.truncate=function(t,e){var n=30,i="...";if(uK(e)){var u="separator"in e?e.separator:u;n="length"in e?u7(e.length):n,i="omission"in e?rx(e.omission):i}var a=(t=ae(t)).length;if(eG(t)){var s=eq(t);a=s.length}if(n>=a)return t;var o=n-eF(i);if(o<1)return i;var l=s?rP(s,0,o).join(""):t.slice(0,o);if(r===u)return l+i;if(s&&(o+=l.length-o),uZ(u)){if(t.slice(o).search(u)){var c,f=l;for(u.global||(u=tS(u.source,ae(ts.exec(u))+"g")),u.lastIndex=0;c=u.exec(f);)var h=c.index;l=l.slice(0,r===h?o:h)}}else if(t.indexOf(rx(u),o)!=o){var d=l.lastIndexOf(u);d>-1&&(l=l.slice(0,d))}return l+i},ng.unescape=function(t){return(t=ae(t))&&z.test(t)?t.replace(G,eV):t},ng.uniqueId=function(t){var e=++tC;return ae(t)+e},ng.upperCase=aP,ng.upperFirst=aC,ng.each=ul,ng.eachRight=uc,ng.first=iK,aB(ng,(tv={},nq(ng,function(t,e){tP.call(ng.prototype,e)||(tv[e]=t)}),tv),{chain:!1}),ng.VERSION="4.17.21",el(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){ng[t].placeholder=ng}),el(["drop","take"],function(t,e){nm.prototype[t]=function(n){n=r===n?1:e2(u7(n),0);var i=this.__filtered__&&!e?new nm(this):this.clone();return i.__filtered__?i.__takeCount__=e3(n,i.__takeCount__):i.__views__.push({size:e3(n,0xffffffff),type:t+(i.__dir__<0?"Right":"")}),i},nm.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),el(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;nm.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ic(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),el(["head","last"],function(t,e){var n="take"+(e?"Right":"");nm.prototype[t]=function(){return this[n](1).value()[0]}}),el(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");nm.prototype[t]=function(){return this.__filtered__?new nm(this):this[n](1)}}),nm.prototype.compact=function(){return this.filter(aG)},nm.prototype.find=function(t){return this.filter(t).head()},nm.prototype.findLast=function(t){return this.reverse().find(t)},nm.prototype.invokeMap=rf(function(t,e){return"function"==typeof t?new nm(this):this.map(function(n){return n2(n,t,e)})}),nm.prototype.reject=function(t){return this.filter(uT(ic(t)))},nm.prototype.slice=function(t,e){t=u7(t);var n=this;return n.__filtered__&&(t>0||e<0)?new nm(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),r!==e&&(n=(e=u7(e))<0?n.dropRight(-e):n.take(e-t)),n)},nm.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},nm.prototype.toArray=function(){return this.take(0xffffffff)},nq(nm.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),u=ng[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);u&&(ng.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,o=e instanceof nm,l=s[0],c=o||uU(e),f=function(t){var e=u.apply(ng,ep([t],s));return i&&h?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(o=c=!1);var h=this.__chain__,d=!!this.__actions__.length,g=a&&!h,p=o&&!d;if(!a&&c){e=p?e:new nm(this);var _=t.apply(e,s);return _.__actions__.push({func:ui,args:[f],thisArg:r}),new nv(_,h)}return g&&p?t.apply(this,s):(_=this.thru(f),g?i?_.value()[0]:_.value():_)})}),el(["pop","push","shift","sort","splice","unshift"],function(t){var e=tM[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);ng.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(uU(i)?i:[],t)}return this[n](function(n){return e.apply(uU(n)?n:[],t)})}}),nq(nm.prototype,function(t,e){var n=ng[e];if(n){var r=n.name+"";tP.call(nu,r)||(nu[r]=[]),nu[r].push({name:e,func:n})}}),nu[rX(r,2).name]=[{name:"wrapper",func:r}],nm.prototype.clone=function(){var t=new nm(this.__wrapped__);return t.__actions__=rG(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rG(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rG(this.__views__),t},nm.prototype.reverse=function(){if(this.__filtered__){var t=new nm(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},nm.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=uU(t),r=e<0,i=n?t.length:0,u=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var u=n[r],a=u.size;switch(u.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=e3(e,t+a);break;case"takeRight":t=e2(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=u.start,s=u.end,o=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,h=0,d=e3(o,this.__takeCount__);if(!n||!r&&i==o&&d==o)return rR(t,this.__actions__);var g=[];t:for(;o--&&h<d;){for(var p=-1,_=t[l+=e];++p<f;){var v=c[p],m=v.iteratee,y=v.type,b=m(_);if(2==y)_=b;else if(!b)if(1==y)continue t;else break t}g[h++]=_}return g},ng.prototype.at=uu,ng.prototype.chain=function(){return ur(this)},ng.prototype.commit=function(){return new nv(this.value(),this.__chain__)},ng.prototype.next=function(){this.__values__===r&&(this.__values__=u4(this.value()));var t=this.__index__>=this.__values__.length,e=t?r:this.__values__[this.__index__++];return{done:t,value:e}},ng.prototype.plant=function(t){for(var e,n=this;n instanceof n_;){var i=iG(n);i.__index__=0,i.__values__=r,e?u.__wrapped__=i:e=i;var u=i;n=n.__wrapped__}return u.__wrapped__=t,e},ng.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof nm){var e=t;return this.__actions__.length&&(e=new nm(this)),(e=e.reverse()).__actions__.push({func:ui,args:[i1],thisArg:r}),new nv(e,this.__chain__)}return this.thru(i1)},ng.prototype.toJSON=ng.prototype.valueOf=ng.prototype.value=function(){return rR(this.__wrapped__,this.__actions__)},ng.prototype.first=ng.prototype.head,t6&&(ng.prototype[t6]=function(){return this}),ng}();if("function"==typeof define&&"object"==typeof define.amd&&define.amd)t4._=eQ,t.r,r!==eQ&&t.v(eQ);else t7?((t7.exports=eQ)._=eQ,t8._=eQ):t4._=eQ}).call(t.e)},7123,t=>{"use strict";var e,n,r,i,u,a,s,o,l,c,f,h,d,g,p=t.i(43476),_=t.i(71645);function v({images:t}){let[e,n]=(0,_.useState)(0);return(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,p.jsx)("img",{src:t[e],alt:"Product",className:"w-full h-96 object-contain mb-4 rounded-lg"}),(0,p.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:t.map((t,r)=>(0,p.jsx)("img",{src:t,alt:`Product view ${r+1}`,onClick:()=>n(r),className:`w-20 h-20 object-cover rounded cursor-pointer border-2 transition ${e===r?"border-blue-600 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}`},r))})]})}function m({reviews:t,rating:e}){return(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-8",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,p.jsx)("h2",{className:"text-2xl font-semibold",children:"Customer Reviews"}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:e}),(0,p.jsx)("div",{className:"text-sm text-gray-600",children:"out of 5"})]})]}),(0,p.jsx)("div",{className:"space-y-6",children:t.map(t=>(0,p.jsxs)("div",{className:"border-b pb-6 last:border-b-0",children:[(0,p.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,p.jsx)("span",{className:"font-semibold text-gray-900",children:t.userName}),t.verified&&(0,p.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Verified Purchase"})]}),(0,p.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,p.jsxs)("span",{className:"text-yellow-400",children:["★".repeat(t.rating),"☆".repeat(5-t.rating)]}),(0,p.jsx)("span",{className:"text-sm text-gray-500",children:t.date})]})]})}),(0,p.jsx)("h4",{className:"font-medium mt-2 text-gray-900",children:t.title}),(0,p.jsx)("p",{className:"text-gray-700 mt-1 leading-relaxed",children:t.comment})]},t.id))})]})}var y=((e={}).TEXT="text",e.WORD="word",e.CHUNK="chunk",e.UNKNOWN="unknown",e),b=((n={}).USER_TRANSCRIPTION="user.transcription",n.AGENT_TRANSCRIPTION="assistant.transcription",n.MSG_INTERRUPTED="message.interrupt",n.MSG_METRICS="message.metrics",n.MSG_ERROR="message.error",n.MSG_STATE="message.state",n.IMAGE_UPLOAD="image.upload",n.MESSAGE_INFO="message.info",n.MESSAGE_SAL_STATUS="message.sal_status",n),x=((r={}).MESSAGE="message",r.PRESENCE="presence",r.STATUS="status",r),E=((i={}).NETWORK_QUALITY="network-quality",i.USER_PUBLISHED="user-published",i.USER_UNPUBLISHED="user-unpublished",i.STREAM_MESSAGE="stream-message",i.USER_JOINED="user-joined",i.USER_LEFT="user-left",i.CONNECTION_STATE_CHANGE="connection-state-change",i.AUDIO_PTS="audio-pts",i);(u={}).MICROPHONE_CHANGED="microphone-changed",u.REMOTE_USER_CHANGED="remote-user-changed",u.REMOTE_USER_JOINED="remote-user-joined",u.REMOTE_USER_LEFT="remote-user-left",u.LOCAL_TRACKS_CHANGED="local-tracks-changed";var w=((a={}).AGENT_STATE_CHANGED="agent-state-changed",a.AGENT_INTERRUPTED="agent-interrupted",a.AGENT_METRICS="agent-metrics",a.AGENT_ERROR="agent-error",a.TRANSCRIPT_UPDATED="transcript-updated",a.DEBUG_LOG="debug-log",a.MESSAGE_RECEIPT_UPDATED="message-receipt-updated",a.MESSAGE_ERROR="message-error",a.MESSAGE_SAL_STATUS="message-sal-status",a),S=((s={}).LLM="llm",s.MLLM="mllm",s.TTS="tts",s.CONTEXT="context",s.UNKNOWN="unknown",s);class N extends Error{constructor(t){super(t),this.name="NotFoundError"}}var R=((o={})[o.IN_PROGRESS=0]="IN_PROGRESS",o[o.END=1]="END",o[o.INTERRUPTED=2]="INTERRUPTED",o);(l={}).IDLE="idle",l.LISTENING="listening",l.THINKING="thinking",l.SPEAKING="speaking",l.SILENT="silent";var M=((c={}).INTERRUPTED="interrupted",c.APPEND="append",c.IGNORE="ignore",c),T=((f={}).TEXT="text",f.IMAGE="image",f.UNKNOWN="unknown",f);(h={}).PENDING="pending",h.SENT="sent",h.FAILED="failed",(d={}).VP_DISABLED="VP_DISABLED",d.VP_UNREGISTER="VP_UNREGISTER",d.VP_REGISTERING="VP_REGISTERING",d.VP_REGISTER_SUCCESS="VP_REGISTER_SUCCESS",d.VP_REGISTER_FAIL="VP_REGISTER_FAIL",d.VP_REGISTER_DUPLICATE="VP_REGISTER_DUPLICATE";let A=t=>(...e)=>`[${t.tag}] ${e.map(t=>JSON.stringify(t)).join(" ")}`;var I=((g={}).debug="debug",g.info="info",g.warn="warn",g.error="error",g);class j{_eventMap=new Map;once(t,e){let n=(...r)=>{this.off(t,n),e(...r)};return this.on(t,n),this}on(t,e){let n=this._eventMap.get(t)??[];return n.push(e),this._eventMap.set(t,n),console.debug(`Subscribed to event: ${String(t)}`),this}off(t,e){let n=this._eventMap.get(t);return n&&(this._eventMap.set(t,n.filter(t=>t!==e)),console.debug(`Unsubscribed from event: ${String(t)}`)),this}removeAllEventListeners(){this._eventMap.clear(),console.debug("Removed all event listeners")}emit(t,...e){for(let n of this._eventMap.get(t)??[])try{n&&n(...e)}catch(n){let e=n.stack||n.message;console.error(`Error handling event ${String(t)}: ${e}`)}return console.debug({args:e},`Emitted event: ${String(t)}`),this}}var P=t.i(42778);let C={debug:(...t)=>console.debug(...t),info:(...t)=>console.info(...t),warn:(...t)=>console.warn(...t),error:(...t)=>console.error(...t)},O="CovSubRenderController",$=`[${O}]`,D=A({tag:O});class U{static NAME=O;static VERSION="1.8.0";callMessagePrint;static self_uid=0;_mode=y.UNKNOWN;_queue=[];_interval;_intervalRef=null;_pts=0;_lastPoppedQueueItem=null;_isRunning=!1;_agentMessageState=null;_transcriptChunk=null;chatHistory=[];onChatHistoryUpdated=null;onAgentStateChanged;onAgentInterrupted=null;onDebugLog=null;onAgentMetrics=null;onAgentError=null;onMessageReceipt=null;onMessageError=null;onMessageSalStatus=null;constructor(t={}){this.callMessagePrint=(t=I.debug,...e)=>{C[t](D(...e)),this.onDebugLog?.(`[${t}] ${D(...e)}`)},this.callMessagePrint(I.debug,`${U.NAME} initialized, version: ${U.VERSION}`),this._interval=t.interval??200,this.onChatHistoryUpdated=t.onChatHistoryUpdated??null,this.onAgentStateChanged=t.onAgentStateChanged??null,this.onAgentInterrupted=t.onAgentInterrupted??null,this.onDebugLog=t.onDebugLog??null,this.onAgentMetrics=t.onAgentMetrics??null,this.onAgentError=t.onAgentError??null,this.onMessageReceipt=t.onMessageReceipt??null,this.onMessageError=t.onMessageError??null,this.onMessageSalStatus=t.onMessageSalStatus??null}_preSetupInterval(){if(!this._isRunning){console.error($,"Message service is not running"),this.callMessagePrint(I.error,"_preSetupInterval","Message service is not running");return}}_setupIntervalForWords(t){if(this._preSetupInterval(),t?.isForce){this._intervalRef&&(clearInterval(this._intervalRef),this._intervalRef=null),this._intervalRef=setInterval(this._handleQueue.bind(this),this._interval);return}this._intervalRef||(this._intervalRef=setInterval(this._handleQueue.bind(this),this._interval))}_handleQueue(){let t=this._queue.length;if(0===t)return;let e=this._pts;if(1===t){let t=this._queue[0];this._handleTurnObj(t,e),this._mutateChatHistory();return}if(t>2&&this.callMessagePrint(I.error,"Queue length is greater than 2, but it should not happen"),t>1){this._queue=this._queue.sort((t,e)=>t.turn_id-e.turn_id);let t=this._queue[this._queue.length-1],n=this._queue[this._queue.length-2];if(t.words[0].start_ms>e){this._handleTurnObj(n,e),this._mutateChatHistory();return}let r=this.chatHistory.find(t=>t.turn_id===n.turn_id&&t.stream_id===n.stream_id);return r?(r.status=R.INTERRUPTED,this._lastPoppedQueueItem=this._queue.shift(),this._handleTurnObj(t,e),void this._mutateChatHistory()):void this.callMessagePrint(I.warn,"No corresponding chatHistory item found",n)}}_handleTurnObj(t,e){let n=this.chatHistory.find(e=>e.turn_id===t.turn_id&&e.stream_id===t.stream_id);this.callMessagePrint(I.debug,"handleTurnObj",t,"correspondingChatHistoryItem",n),n||(this.callMessagePrint(I.debug,"handleTurnObj","No corresponding chatHistory item found","push to chatHistory"),n={turn_id:t.turn_id,uid:t.uid,stream_id:t.stream_id,_time:new Date().getTime(),text:"",status:t.status,metadata:t},this._appendChatHistory(n)),n._time=new Date().getTime(),n.metadata=t,t.status===R.INTERRUPTED&&(n.status=R.INTERRUPTED);let r=[],i=[];for(let n of t.words)n.start_ms<=e?r.push(n):i.push(n);let u=0===i.length,a=r[r.length-1]?.word_status!==R.IN_PROGRESS;if(u&&a){n.text=t.text,n.status=t.status,this._lastPoppedQueueItem=this._queue.shift();return}let s=r.filter(t=>t.start_ms<=this._pts).map(t=>t.word).join("");n.text=s,r[r.length-1]?.word_status===R.INTERRUPTED&&(this._lastPoppedQueueItem=this._queue.shift())}_mutateChatHistory(){this.callMessagePrint(I.debug,">>> onChatHistoryUpdated",`pts: ${this._pts}, chatHistory length: ${this.chatHistory.length}`,this.chatHistory.map(t=>`${t.uid}:${t.text}[status: ${t.status}]`).join("\n")),this.onChatHistoryUpdated?.(this.chatHistory)}_appendChatHistory(t){0===t.turn_id?this.chatHistory=[t,...this.chatHistory]:this.chatHistory.push(t)}_interruptQueue(t){let e=t.turn_id,n=t.start_ms,r=this._queue.find(t=>t.turn_id===e);if(this.callMessagePrint(I.debug,"interruptQueue",`turn_id: ${e}, start_ms: ${n}, correspondingQueueItem: ${r}`),!r)return;r.status=R.INTERRUPTED;let i=r.words.filter(t=>t.start_ms<=n),u=r.words.filter(t=>t.start_ms>n);0===i.length?r.words.forEach(t=>{t.word_status=R.INTERRUPTED}):(i[i.length-1].word_status=R.INTERRUPTED,i?.[i.length-2]&&(i[i.length-2].word_status=R.INTERRUPTED),u.forEach(t=>{t.word_status=R.INTERRUPTED}),r.words=[...i,...u])}_pushToQueue(t){let e=this._queue.find(e=>e.turn_id===t.turn_id),n=this._queue.reduce((t,e)=>Math.max(t,e.turn_id),0);if(!e){if(t.turn_id<n)return void this.callMessagePrint(I.debug,"[Word Mode]",`[${t.uid}]`,"Drop message with turn_id less than latestTurnId",`turn_id: ${t.turn_id}, latest turn_id: ${n}`,t);let e={turn_id:t.turn_id,text:t.text,words:this.sortWordsWithStatus(t.words,t.status),status:t.status,stream_id:t.stream_id,uid:t.uid};return this.callMessagePrint(I.debug,"[Word Mode]",`[${t.uid}]`,"push to queue",e),void this._queue.push(e)}this.callMessagePrint(I.debug,"[Word Mode]",`[${t.uid}]`,"update queue item",e,t),e.text=t.text,e.words=this.sortWordsWithStatus([...e.words,...t.words],t.status),(e.status===R.IN_PROGRESS||t.status!==R.IN_PROGRESS)&&(e.status=t.status)}_teardownInterval(){this._intervalRef&&(clearInterval(this._intervalRef),this._intervalRef=null)}sortWordsWithStatus(t,e){if(0===t.length)return t;let n=t.map(t=>({...t,word_status:R.IN_PROGRESS})).sort((t,e)=>t.start_ms-e.start_ms).reduce((t,e)=>(t.find(t=>t.start_ms===e.start_ms)||t.push(e),t),[]);return e!==R.IN_PROGRESS&&(n[n.length-1].word_status=e),n}handleTextMessage(t,e){let n=e.turn_id,r=e.text||"",i=e.stream_id,u=R.END,a=this.chatHistory.find(t=>t.turn_id===n&&t.stream_id===i);a?(a.text=r,a.status=u,a.metadata=e,a._time=new Date().getTime(),this.callMessagePrint(I.debug,"[Text Mode]",`[${t}]`,a)):(this.callMessagePrint(I.debug,"[Text Mode]",`[${t}]`,"new item",e),this._appendChatHistory({turn_id:n,uid:e.stream_id?`${U.self_uid}`:`${t}`,stream_id:i,_time:new Date().getTime(),text:r,status:u,metadata:e})),this._mutateChatHistory()}_handleTranscriptChunk(){if(!this._transcriptChunk)return void this.callMessagePrint(I.warn,`[${y.CHUNK} Mode]`,"_handleTranscriptChunk","missing _transcriptChunk");let t=this._transcriptChunk.index,e=this._transcriptChunk.data,n=e.text.length,r=this._transcriptChunk.uid,i=t+1>=n?n:t+1;this._transcriptChunk.index=i;let u=e.text.substring(0,i),a=u.length>0&&e.turn_status!==R.IN_PROGRESS&&u.length===e.text.length,s=this.chatHistory.find(t=>t.turn_id===e.turn_id&&t.stream_id===e.stream_id);s?(s.text=u,s.status=a?e.turn_status:s.status,s.metadata=e,s._time=Date.now(),this.callMessagePrint(I.debug,`[${y.CHUNK} Mode]`,`[${r}]`,"update transcriptChunk",s)):(this.callMessagePrint(I.debug,`[${y.CHUNK} Mode]`,`[${r}]`,"new transcriptChunk",this._transcriptChunk),this._appendChatHistory({turn_id:e.turn_id,uid:e.stream_id?`${U.self_uid}`:`${r}`,stream_id:e.stream_id,_time:Date.now(),text:u,status:e.turn_status,metadata:e})),this._mutateChatHistory()}handleChunkTextMessage(t,e){if(this.callMessagePrint(I.debug,`[${y.CHUNK} Mode]`,`[${t}]`,"new item",e),this._transcriptChunk&&this._transcriptChunk.data.turn_id<e.turn_id){this._teardownInterval();let e=this.chatHistory.find(e=>e.turn_id===this._transcriptChunk?.data.turn_id&&e.uid===t);e&&(e.status=R.END),this._transcriptChunk=null}this._transcriptChunk={index:this._transcriptChunk?.index??0,data:e,uid:t},this._intervalRef||(this._intervalRef=setInterval(this._handleTranscriptChunk.bind(this),this._interval))}handleMessageInterrupt(t,e){this.callMessagePrint(I.debug,"<<< [onInterrupted]",`pts: ${this._pts}, uid: ${t}`,e);let n=e.turn_id,r=P.default.min([e.start_ms,this._pts])||e.start_ms;if(this._interruptQueue({turn_id:n,start_ms:r}),this._transcriptChunk){this._teardownInterval();let e=this.chatHistory.find(e=>e.turn_id===this._transcriptChunk?.data.turn_id&&e.uid===t);e&&(e.status=R.INTERRUPTED),this._transcriptChunk=null}this._mutateChatHistory(),this.onAgentInterrupted?.(`${t}`,{turnID:n,timestamp:r})}handleMessageMetrics(t,e){let n=e.latency_ms,r=e.module,i=e.metric_name;Object.values(S).includes(r)?this.onAgentMetrics?.(`${t}`,{type:r,name:i,value:n,timestamp:e.send_ts}):this.callMessagePrint(I.warn,"Unknown metric module:",e)}handleMessageSalStatus(t,e){this.callMessagePrint(I.debug,"handleMessageSalStatus",e),this.onMessageSalStatus?.(`${t}`,e)}handleMessageError(t,e){let n=e.code||-1,r=e.message,i=e.module;if(!Object.values(S).includes(i))return void this.callMessagePrint(I.warn,"Unknown error module:",e);if(i===S.CONTEXT)try{let i=JSON.parse(r),u={type:i?.module==="picture"?T.IMAGE:T.UNKNOWN,code:n,message:r,timestamp:e?.send_ts||Date.now()};this.onMessageError?.(`${t}`,u)}catch(t){this.callMessagePrint(I.error,"Failed to parse context error message",t,e)}this.onAgentError?.(`${t}`,{type:i,code:n,message:r,timestamp:e?.send_ts||Date.now()})}handleMessageInfo(t,e){try{let n=e?.message||"",r=JSON.parse(n),i=e?.module,u=e?.turn_id;if(!n||!r||!i||!u)return void this.callMessagePrint(I.error,"handleMessageInfo","Invalid message object",e);let a=e?.resource_type==="picture"?T.IMAGE:T.UNKNOWN;this.onMessageReceipt?.(t,{moduleType:i,messageType:a,message:n,turnId:u})}catch(t){this.callMessagePrint(I.debug,"handleMessageInfo","Failed to parse message string from image info message",t,e)}}handleAgentStatus(t){let e=t.stateChanged,n=P.default.toNumber(e.turn_id)||0;if(P.default.toNumber(this._agentMessageState?.turn_id||0)>n)return void this.callMessagePrint(I.debug,"handleAgentStatus","ignore older message(turn_id)");let r=t.timestamp;P.default.toNumber(this._agentMessageState?.timestamp||0)>=r?this.callMessagePrint(I.debug,"handleAgentStatus","ignore older message(timestamp)"):(this.callMessagePrint(I.debug,">>> handleAgentStatus",`pts: ${this._pts}, uid: ${t.publisher}`,`prev-state: ${this._agentMessageState?.state}, prev-turn_id: ${this._agentMessageState?.turn_id}, prev-timestamp: ${this._agentMessageState?.timestamp}`,`current-state: ${t.stateChanged.state}, turn_id: ${t.stateChanged.turn_id}, timestamp: ${t.timestamp}`),this._agentMessageState={state:e.state,turn_id:e.turn_id,timestamp:r},this.onAgentStateChanged?.(t.publisher,{state:e.state,turnID:P.default.toNumber(e.turn_id),timestamp:r,reason:""}))}handleWordAgentMessage(t,e){if(void 0===e.turn_status)return void this.callMessagePrint(I.debug,"[Word Mode]",`[${t}]`,"Drop message with undefined turn_status",e.turn_id);let n=e.turn_id,r=e.text||"",i=e.words||[],u=e.stream_id,a=this._lastPoppedQueueItem?.turn_id;a&&0!==n&&n<=a?this.callMessagePrint(I.debug,"[Word Mode]",`[${t}]`,"Drop message with turn_id less than last popped queue item",`turn_id: ${n}, last popped queue item turn_id: ${a}`):this._pushToQueue({uid:e.stream_id?`${U.self_uid}`:`${t}`,turn_id:n,words:i,text:r,status:e.turn_status,stream_id:u})}setMode(t){this._mode!==y.UNKNOWN?this.callMessagePrint(I.warn,`Mode should only be set once, but it is set[${t}] again`,"current mode:",this._mode):t===y.UNKNOWN?this.callMessagePrint(I.warn,"Unknown mode should not be set"):(t===y.CHUNK?this._interval=100:this._interval=200,this.callMessagePrint(I.debug,"setMode",y.TEXT),this._mode=t)}handleMessage(t,e){let n=t?.object;if(!Object.values(b).includes(n))return void this.callMessagePrint(I.info,"<<< [unknown message]",e,t);let r=t.object===b.AGENT_TRANSCRIPTION,i=t.object===b.USER_TRANSCRIPTION,u=t.object===b.MSG_INTERRUPTED,a=t.object===b.MSG_METRICS,s=t.object===b.MSG_ERROR,o=t.object===b.MESSAGE_INFO,l=t.object===b.MESSAGE_SAL_STATUS;if(r&&this._mode===y.UNKNOWN&&(!t.words||Array.isArray(t.words)&&0===t.words.length?this.setMode(y.TEXT):(this._setupIntervalForWords({isForce:!0}),this.setMode(y.WORD))),r&&this._mode===y.WORD){this._setupIntervalForWords({isForce:!1}),this.handleWordAgentMessage(e.publisher,t);return}r&&this._mode===y.TEXT?this.handleTextMessage(e.publisher,t):r&&this._mode===y.CHUNK?this.handleChunkTextMessage(e.publisher,t):i?this.handleTextMessage(e.publisher,t):u?this.handleMessageInterrupt(e.publisher,t):o?this.handleMessageInfo(e.publisher,t):a?this.handleMessageMetrics(e.publisher,t):s?this.handleMessageError(e.publisher,t):l&&this.handleMessageSalStatus(e.publisher,t)}run(){this._isRunning=!0}setPts(t){this._pts<t&&0!==t&&(this._pts=t)}cleanup(){this.callMessagePrint(I.debug,"cleanup"),this._isRunning=!1,this._teardownInterval(),this._queue=[],this._lastPoppedQueueItem=null,this._pts=0,this.chatHistory=[],this._mode=y.UNKNOWN,this._agentMessageState=null,this._transcriptChunk=null}}let k={debug:(...t)=>console.debug(...t),info:(...t)=>console.info(...t),warn:(...t)=>console.warn(...t),error:(...t)=>console.error(...t)},L=()=>Math.random().toString(36).substring(2,15),G="ConversationalAIAPI",W=A({tag:G});class z extends j{static NAME=G;static VERSION="1.8.0";static _instance=null;callMessagePrint;rtcEngine=null;rtmEngine=null;renderMode=y.UNKNOWN;channel=null;covSubRenderController;enableLog=!1;constructor(){super(),this.callMessagePrint=(t=I.debug,...e)=>{this.enableLog&&(k[t](W(...e)),this.onDebugLog?.(`[${t}] ${W(...e)}`))},this.callMessagePrint(I.debug,`${z.NAME} initialized, version: ${z.VERSION}`),this.covSubRenderController=new U({onChatHistoryUpdated:this.onChatHistoryUpdated.bind(this),onAgentStateChanged:this.onAgentStateChanged.bind(this),onAgentInterrupted:this.onAgentInterrupted.bind(this),onDebugLog:this.onDebugLog.bind(this),onAgentMetrics:this.onAgentMetrics.bind(this),onAgentError:this.onAgentError.bind(this),onMessageReceipt:this.onMessageReceiptUpdated.bind(this),onMessageError:this.onMessageError.bind(this),onMessageSalStatus:this.onMessageSalStatus.bind(this)})}static getInstance(){if(!z._instance)throw new N("ConversationalAIAPI is not initialized");return z._instance}getCfg(){if(!this.rtcEngine||!this.rtmEngine)throw new N("ConversationalAIAPI is not initialized");return{rtcEngine:this.rtcEngine,rtmEngine:this.rtmEngine,renderMode:this.renderMode,channel:this.channel,enableLog:this.enableLog}}static init(t){return z._instance||(z._instance=new z),z._instance.rtcEngine=t.rtcEngine,z._instance.rtmEngine=t.rtmEngine,z._instance.renderMode=t.renderMode??y.UNKNOWN,z._instance.enableLog=t.enableLog??!1,z._instance}subscribeMessage(t){this.bindRtcEvents(),this.bindRtmEvents(),this.channel=t,this.covSubRenderController.setMode(this.renderMode),this.covSubRenderController.run()}unsubscribe(){this.unbindRtcEvents(),this.unbindRtmEvents(),this.channel=null,this.covSubRenderController.cleanup()}destroy(){let t=z.getInstance();t&&(t?.rtcEngine?.removeAllListeners(),t.rtcEngine=null,t?.rtmEngine?.removeAllListeners(),t.rtmEngine=null,t.renderMode=y.UNKNOWN,t.channel=null,t.removeAllEventListeners(),z._instance=null),this.callMessagePrint(I.debug,`${z.NAME} destroyed`)}async chat(t,e){switch(e.messageType){case T.TEXT:return this.sendText(t,e);case T.IMAGE:return this.sendImage(t,e);default:throw Error("Unsupported chat message type")}}async sendText(t,e){let n=L();this.callMessagePrint(I.debug,`>>> [trancID:${n}] [chat] ${t}`,e);let{rtmEngine:r}=this.getCfg(),i={priority:e.priority??M.INTERRUPTED,interruptable:e.responseInterruptable??!0,message:e.text??""};try{let e=JSON.stringify(i),u={channelType:"USER",customType:b.USER_TRANSCRIPTION};this.callMessagePrint(I.debug,`msg: [traceID: ${n}] rtm publish`,e);let a=await r.publish(t,e,u);this.callMessagePrint(I.debug,`>>> [trancID:${n}] [chat]`,"sucessfully sent chat message",a)}catch(t){throw this.callMessagePrint(I.error,`>>> [trancID:${n}] [chat]`,"failed to send chat message",t),Error("failed to send chat message")}}async sendImage(t,e){let n=L();this.callMessagePrint(I.debug,`>>> [trancID:${n}] [chat] ${t}`,e);let{rtmEngine:r}=this.getCfg(),i={uuid:e.uuid,image_url:e?.url||"",image_base64:e?.base64||""};try{let e=JSON.stringify(i),u={channelType:"USER",customType:b.IMAGE_UPLOAD};this.callMessagePrint(I.debug,`msg: [traceID: ${n}] rtm publish`,e);let a=await r.publish(t,e,u);this.callMessagePrint(I.debug,`>>> [trancID:${n}] [chat]`,"sucessfully sent chat message",a)}catch(t){throw this.callMessagePrint(I.error,`>>> [trancID:${n}] [chat]`,"failed to send chat message",t),Error("failed to send chat message")}}async interrupt(t){let e=L();this.callMessagePrint(I.debug,`>>> [trancID:${e}] [interrupt]`,t);let{rtmEngine:n}=this.getCfg(),r={channelType:"USER",customType:b.MSG_INTERRUPTED},i=JSON.stringify({customType:b.MSG_INTERRUPTED});try{let u=await n.publish(t,i,r);this.callMessagePrint(I.debug,`>>> [trancID:${e}] [interrupt]`,"sucessfully sent interrupt message",u)}catch(t){throw this.callMessagePrint(I.error,`>>> [trancID:${e}] [interrupt]`,"failed to send interrupt message",t),Error("failed to send interrupt message")}}onChatHistoryUpdated(t){this.callMessagePrint(I.debug,`>>> ${w.TRANSCRIPT_UPDATED}`,t),this.emit(w.TRANSCRIPT_UPDATED,t)}onAgentStateChanged(t,e){this.callMessagePrint(I.debug,`>>> ${w.AGENT_STATE_CHANGED}`,t,e),this.emit(w.AGENT_STATE_CHANGED,t,e)}onAgentInterrupted(t,e){this.callMessagePrint(I.debug,`>>> ${w.AGENT_INTERRUPTED}`,t,e),this.emit(w.AGENT_INTERRUPTED,t,e)}onDebugLog(t){this.emit(w.DEBUG_LOG,t)}onAgentMetrics(t,e){this.callMessagePrint(I.debug,`>>> ${w.AGENT_METRICS}`,t,e),this.emit(w.AGENT_METRICS,t,e)}onAgentError(t,e){this.callMessagePrint(I.error,`>>> ${w.AGENT_ERROR}`,t,e),this.emit(w.AGENT_ERROR,t,e)}onMessageReceiptUpdated(t,e){this.callMessagePrint(I.error,`>>> ${w.MESSAGE_RECEIPT_UPDATED}`,t,e),this.emit(w.MESSAGE_RECEIPT_UPDATED,t,e)}onMessageError(t,e){this.callMessagePrint(I.error,`>>> ${w.MESSAGE_ERROR}`,t,e),this.emit(w.MESSAGE_ERROR,t,e)}onMessageSalStatus(t,e){this.callMessagePrint(I.debug,`>>> ${w.MESSAGE_SAL_STATUS}`,t,e),this.emit(w.MESSAGE_SAL_STATUS,t,e)}bindRtcEvents(){this.getCfg().rtcEngine.on(E.AUDIO_PTS,this._handleRtcAudioPTS.bind(this))}unbindRtcEvents(){this.getCfg().rtcEngine.off(E.AUDIO_PTS,this._handleRtcAudioPTS.bind(this))}bindRtmEvents(){this.getCfg().rtmEngine.addEventListener(x.MESSAGE,this._handleRtmMessage.bind(this)),this.getCfg().rtmEngine.addEventListener(x.PRESENCE,this._handleRtmPresence.bind(this)),this.getCfg().rtmEngine.addEventListener(x.STATUS,this._handleRtmStatus.bind(this))}unbindRtmEvents(){this.getCfg().rtmEngine.removeEventListener(x.MESSAGE,this._handleRtmMessage.bind(this)),this.getCfg().rtmEngine.removeEventListener(x.PRESENCE,this._handleRtmPresence.bind(this)),this.getCfg().rtmEngine.removeEventListener(x.STATUS,this._handleRtmStatus.bind(this))}_handleRtcAudioPTS(t){try{this.callMessagePrint(I.debug,`<<< ${E.AUDIO_PTS}`,t),this.covSubRenderController.setPts(t)}catch(e){this.callMessagePrint(I.error,`<<< ${E.AUDIO_PTS}`,t,e)}}_handleRtmMessage(t){let e=L();this.callMessagePrint(I.debug,`>>> [trancID:${e}] ${x.MESSAGE}`,`Publisher: ${t.publisher}, type: ${t.messageType}`);try{let n=t.message;if("string"==typeof n){let r=JSON.parse(n);this.callMessagePrint(I.debug,`>>> [trancID:${e}] ${x.MESSAGE}`,r),this.covSubRenderController.handleMessage(r,{publisher:t.publisher});return}if(n instanceof Uint8Array){let r=new TextDecoder("utf-8").decode(n),i=JSON.parse(r);this.callMessagePrint(I.debug,`>>> [trancID:${e}] ${x.MESSAGE}`,i),this.covSubRenderController.handleMessage(i,{publisher:t.publisher});return}this.callMessagePrint(I.warn,`>>> [trancID:${e}] ${x.MESSAGE}`,"Unsupported message type received")}catch(t){this.callMessagePrint(I.error,`>>> [trancID:${e}] ${x.MESSAGE}`,"Failed to parse message",t)}}_handleRtmPresence(t){let e=L();this.callMessagePrint(I.debug,`>>> [trancID:${e}] ${x.PRESENCE}`,`Publisher: ${t.publisher}`);let n=t.stateChanged;n?.state&&n?.turn_id&&(this.callMessagePrint(I.debug,`>>> [trancID:${e}] ${x.PRESENCE}`,`State changed: ${n.state}, Turn ID: ${n.turn_id}, timestamp: ${t.timestamp}`),this.covSubRenderController.handleAgentStatus(t)),this.callMessagePrint(I.debug,`>>> [trancID:${e}] ${x.PRESENCE}`,"No state change detected, skipping handling presence event")}_handleRtmStatus(t){let e=L();this.callMessagePrint(I.debug,`>>> [trancID:${e}] ${x.STATUS}`,t)}}function H({product:e,onClose:n}){let[r,i]=(0,_.useState)([]),[u,a]=(0,_.useState)(""),[s,o]=(0,_.useState)(!1),[l,c]=(0,_.useState)(!0),[f,h]=(0,_.useState)(null),[d,g]=(0,_.useState)(null),v=(0,_.useRef)(null),m=(0,_.useRef)(!1),b=(0,_.useRef)(null),x=(0,_.useRef)(null),E=function({appId:e,channel:n,token:r,uid:i}){let[u,a]=(0,_.useState)(!1),[s,o]=(0,_.useState)(!1),[l,c]=(0,_.useState)(null),[f,h]=(0,_.useState)(null),d=(0,_.useRef)(null);(0,_.useEffect)(()=>{if(!e||!n||!r||0===i||!e.trim()||!n.trim()||!r.trim())return;let u=!0,s=null,o=null;return(async()=>{try{let l=(await t.A(48296)).default;if(l.setParameter("ENABLE_AUDIO_PTS_METADATA",!0),d.current=o=l.createClient({mode:"rtc",codec:"vp8"}),await o.join(e,n,r,i),!u)return void await o.leave().catch(()=>{});if(a(!0),s=await l.createMicrophoneAudioTrack(),!u){s.close(),await o.leave().catch(()=>{});return}await o.publish([s]),c(s),o.on("user-published",async(t,e)=>{if("audio"===e&&u)try{await o.subscribe(t,e);let n=t.audioTrack;n&&u&&(h(n),n.play())}catch(t){console.error("Error subscribing to remote audio:",t)}}),o.on("user-unpublished",(t,e)=>{"audio"===e&&u&&h(null)})}catch(t){t?.code!=="OPERATION_ABORTED"&&u&&console.error("Agora initialization error:",t),u&&a(!1)}})(),()=>{if(u=!1,s&&(s.close(),s=null),d.current){let t=d.current;d.current=null,t.leave().catch(()=>{})}a(!1),c(null),h(null)}},[e,n,r,i]);let g=async()=>{l&&(await l.setMuted(!s),o(!s))};return{isConnected:u,isMuted:s,toggleMute:g,leave:async()=>{l&&(l.close(),c(null)),d.current&&(await d.current.leave(),a(!1))},localAudioTrack:l,remoteAudioTrack:f,client:d.current}}(f?{appId:f.appId,channel:f.channel,token:f.token,uid:f.uid}:{appId:"",channel:"",token:"",uid:0});(0,_.useEffect)(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[r]),(0,_.useEffect)(()=>{(async()=>{if(!m.current){m.current=!0;try{let t=await fetch("/api/agora/initialize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Math.floor(1e5*Math.random())})}),e=await t.json();h({appId:e.appId,channel:e.channel,token:e.token,uid:e.uid,rtmUserId:e.rtmUserId||e.uid.toString()});let n=await fetch("/api/agora/start-agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel:e.channel,userId:e.uid,token:e.token})});if(!n.ok){let t=await n.json();throw Error(t.error||`Failed to start agent: ${n.status}`)}let r=await n.json();r.agent_id&&g(r.agent_id),r.greeting_message?i([{role:"assistant",content:r.greeting_message}]):r.properties?.llm?.greeting_message&&i([{role:"assistant",content:r.properties.llm.greeting_message}]),c(!1)}catch(t){console.error("Failed to initialize Agora:",t),c(!1)}}})()},[e.id]),(0,_.useEffect)(()=>{if(!f||!E?.client||x.current)return;let e=!0;return(async()=>{try{let n=await t.A(27232),r=n.default?.RTM||n.RTM||n.default;if(!r||"function"!=typeof r)throw Error("Failed to get RTM class");let u=new r(f.appId,f.rtmUserId);if(b.current=u,await u.login({token:f.token}),!e)return void await u.logout().catch(()=>{});let a=z.init({rtcEngine:E.client,rtmEngine:u,renderMode:y.TEXT,enableLog:!1});x.current=a,a.subscribeMessage(f.channel),a.on(w.TRANSCRIPT_UPDATED,t=>{if(!e)return;let n=t.map(t=>({role:"1000"===t.uid?"assistant":"user",content:t.text||"",uid:t.uid}));i(t=>{let e=new Map;return t.forEach(t=>{let n=`${t.uid||t.role}-${t.content}`;e.set(n,t)}),n.forEach(t=>{let n=`${t.uid||t.role}-${t.content}`;!e.has(n)&&t.content.trim()&&e.set(n,t)}),Array.from(e.values())})})}catch(t){console.error("Toolkit init error:",t)}})(),()=>{if(e=!1,x.current){try{x.current.unsubscribe(),x.current.destroy()}catch(t){}x.current=null}b.current&&(b.current.logout().catch(()=>{}),b.current=null)}},[f,E?.client]);let S=async()=>{if(u.trim()&&!s&&x.current&&d){a(""),o(!0);try{let t={messageType:T.TEXT,text:u,priority:M.INTERRUPTED,responseInterruptable:!0};await x.current.sendText("1000",t),o(!1)}catch(t){console.error("Chat error:",t),i(t=>[...t,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}]),o(!1)}}},N=()=>{if(E&&E.leave(),x.current){try{x.current.unsubscribe(),x.current.destroy()}catch(t){}x.current=null}b.current&&(b.current.logout().catch(()=>{}),b.current=null),n()};return(0,p.jsx)("div",{className:"fixed bottom-24 right-6 z-50 w-80",children:(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl border border-gray-200 h-[500px] flex flex-col",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-3 border-b bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-lg",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,p.jsx)("path",{d:"M12 2a3 3 0 0 0-3 3v6a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"}),(0,p.jsx)("path",{d:"M19 10v1a7 7 0 0 1-14 0v-1M12 18v4M8 22h8"})]}),E?.isConnected&&(0,p.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-sm font-semibold",children:"Voice Assistant"}),l?(0,p.jsx)("span",{className:"text-xs text-blue-200",children:"Connecting..."}):E?.isConnected?(0,p.jsx)("span",{className:"text-xs text-green-200",children:"Listening..."}):(0,p.jsx)("span",{className:"text-xs text-blue-200",children:"Ready"})]})]}),(0,p.jsx)("button",{onClick:()=>{N()},className:"text-white hover:text-gray-200 transition","aria-label":"Close",children:(0,p.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 bg-gray-50 text-sm",children:[r.map((t,e)=>(0,p.jsx)("div",{className:`flex ${"user"===t.role?"justify-end":"justify-start"}`,children:(0,p.jsx)("div",{className:`max-w-[85%] rounded-lg p-2 ${"user"===t.role?"bg-blue-600 text-white":"bg-white text-gray-800 shadow-sm"}`,children:(0,p.jsx)("p",{className:"text-xs leading-relaxed",children:t.content})})},e)),s&&(0,p.jsx)("div",{className:"flex justify-start",children:(0,p.jsx)("div",{className:"bg-white text-gray-800 rounded-lg p-2 shadow-sm",children:(0,p.jsxs)("div",{className:"flex gap-1",children:[(0,p.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce"}),(0,p.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,p.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,p.jsx)("div",{ref:v})]}),(0,p.jsxs)("div",{className:"p-3 border-t bg-white rounded-b-lg",children:[(0,p.jsxs)("div",{className:"mb-2 flex gap-2",children:[(0,p.jsxs)("button",{onClick:()=>{E&&E.toggleMute()},disabled:!E?.isConnected||l,className:`flex-1 py-2 px-2 rounded-lg transition font-medium flex items-center justify-center gap-1 text-xs min-w-0 ${E?.isMuted?"bg-red-100 text-red-700 hover:bg-red-200 border border-red-300":"bg-blue-600 text-white hover:bg-blue-700 shadow-md"} disabled:opacity-50 disabled:cursor-not-allowed`,title:E?.isMuted?"Unmute microphone":"Mute microphone","aria-label":E?.isMuted?"Unmute":"Mute",children:[(0,p.jsx)("svg",{className:"w-3.5 h-3.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E?.isMuted?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),(0,p.jsx)("span",{className:"text-xs whitespace-nowrap truncate",children:E?.isMuted?"Unmute":"Mute"})]}),(0,p.jsxs)("button",{onClick:N,disabled:l,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed text-white py-2 px-2.5 rounded-lg transition font-medium flex items-center justify-center gap-1 shadow-md text-xs flex-shrink-0",title:"End call","aria-label":"End call",children:[(0,p.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 8l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M16 8l-8 8m0 0l-2-2m2 2l2-2"})}),(0,p.jsx)("span",{className:"text-xs whitespace-nowrap",children:"End"})]})]}),(0,p.jsxs)("details",{className:"text-xs",children:[(0,p.jsx)("summary",{className:"cursor-pointer text-gray-500 hover:text-gray-700 mb-1.5",children:"Or type a message"}),(0,p.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,p.jsx)("input",{type:"text",value:u,onChange:t=>a(t.target.value),onKeyPress:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),S())},className:"flex-1 border border-gray-300 rounded px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent disabled:opacity-50",disabled:s||l||!x.current,placeholder:"Type your question..."}),(0,p.jsx)("button",{onClick:S,disabled:s||!u.trim()||l||!x.current||!d,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-3 py-1.5 rounded text-xs transition",children:"Send"})]})]})]})]})})}function B({product:t}){let[e,n]=(0,_.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:()=>n(!0),className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg transition hover:scale-110 z-50 flex items-center justify-center group","aria-label":"Open AI Voice Assistant",title:"Talk to AI Assistant",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),(0,p.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,p.jsx)("div",{className:"absolute w-8 h-8 border-2 border-white rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-ping"}),(0,p.jsx)("div",{className:"absolute w-10 h-10 border-2 border-white rounded-full opacity-0 group-hover:opacity-50 group-hover:animate-ping",style:{animationDelay:"0.2s"}})]})]})}),e&&(0,p.jsx)(H,{product:t,onClose:()=>n(!1)})]})}let F=async()=>(await fetch("/api/product")).json();function q(){let[t,e]=(0,_.useState)(null),[n,r]=(0,_.useState)(!0),[i,u]=(0,_.useState)(null);return((0,_.useEffect)(()=>{F().then(t=>{e(t),r(!1)}).catch(t=>{u(t),r(!1)})},[]),n)?(0,p.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,p.jsx)("div",{className:"text-xl text-gray-600",children:"Loading product..."})}):i?(0,p.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,p.jsx)("div",{className:"text-xl text-red-600",children:"Error loading product"})}):t?(0,p.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,p.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,p.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.name}),(0,p.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsxs)("span",{className:"text-yellow-400 text-2xl",children:["★".repeat(Math.floor(t.rating)),"☆".repeat(5-Math.floor(t.rating))]}),(0,p.jsx)("span",{className:"ml-2 text-gray-600 font-medium",children:t.rating}),(0,p.jsxs)("span",{className:"ml-1 text-gray-500",children:["(",t.reviewCount.toLocaleString()," reviews)"]})]}),t.inStock&&(0,p.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"In Stock"})]}),(0,p.jsxs)("div",{className:"flex items-baseline gap-3 mb-6",children:[(0,p.jsxs)("span",{className:"text-4xl font-bold text-gray-900",children:["$",t.price]}),(0,p.jsxs)("span",{className:"text-2xl text-gray-400 line-through",children:["$",t.originalPrice]}),(0,p.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded text-sm font-medium",children:["Save ",t.discount,"%"]})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,p.jsx)(v,{images:t.images}),(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,p.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Product Details"}),(0,p.jsx)("p",{className:"text-gray-700 mb-6 leading-relaxed",children:t.description}),(0,p.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Specifications"}),(0,p.jsx)("dl",{className:"space-y-2",children:Object.entries(t.specifications).map(([t,e])=>(0,p.jsxs)("div",{className:"flex",children:[(0,p.jsxs)("dt",{className:"font-medium text-gray-700 w-48",children:[t,":"]}),(0,p.jsx)("dd",{className:"text-gray-600",children:e})]},t))}),(0,p.jsx)("button",{className:"mt-8 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition shadow-md hover:shadow-lg",children:"Add to Cart"})]})]}),(0,p.jsx)(m,{reviews:t.reviews,rating:t.rating}),(0,p.jsx)(B,{product:t})]})}):null}t.s(["ProductPage",()=>q],7123)}]);